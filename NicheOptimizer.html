<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Streamer Hub V63 - FINAL FUSION</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://embed.twitch.tv/embed/v1.js"></script>
    <script src="/socket.io/socket.io.js"></script>

    <style>
        :root {
            --bg-dark: #050505;
            --bg-panel: #0b0b0d;
            --primary: #ff0099;
            --secondary: #00f2ea;
            --text-main: #e0e0e0;
        }

        body { background-color: var(--bg-dark); color: var(--text-main); font-family: 'Inter', sans-serif; overflow: hidden; height: 100vh; display: flex; flex-direction: column; }
        .font-orbitron { font-family: 'Orbitron', sans-serif; }

        /* SCROLLBAR */
        ::-webkit-scrollbar { width: 5px; height: 5px; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--secondary); }
        .glass { background: var(--bg-panel); border: 1px solid #1f1f23; border-radius: 6px; }

        /* CAROUSEL */
        .carousel-track { display: flex; gap: 15px; overflow-x: auto; padding: 10px; scroll-behavior: smooth; }
        .stream-card { flex: 0 0 280px; height: 160px; background: #111; border: 1px solid #222; border-radius: 10px; position: relative; cursor: pointer; transition: 0.2s; }
        .stream-card:hover { border-color: var(--secondary); transform: translateY(-4px); box-shadow: 0 5px 15px rgba(0, 242, 234, 0.1); }
        .stream-card img { width: 100%; height: 100%; object-fit: cover; opacity: 0.7; }
        .stream-card:hover img { opacity: 1; }

        /* TABS */
        .tab-btn { flex: 1; padding: 12px; text-align: center; font-family: 'Orbitron'; font-size: 11px; font-weight: bold; cursor: pointer; background: #080808; border-bottom: 2px solid transparent; color: #666; transition: 0.3s; }
        .tab-btn.active { color: var(--secondary); border-bottom-color: var(--secondary); background: #151515; }
        .tab-content { display: none; height: 100%; flex-direction: column; }
        .tab-content.active { display: flex; animation: fadeIn 0.3s; }

        /* TOOLS SUB-NAV */
        .tool-btn { padding: 8px 12px; font-size: 10px; font-weight: bold; border-radius: 4px; background: #1a1a1a; color: #888; border: 1px solid #333; transition: 0.2s; white-space: nowrap; }
        .tool-btn:hover { color: white; border-color: #555; }
        .tool-btn.active { background: var(--secondary); color: black; border-color: var(--secondary); }
        .tool-content { display: none; margin-top: 15px; }
        .tool-content.active { display: block; animation: fadeIn 0.3s; }

        /* CHAT HUB & SMILEYS */
        .hub-msg { padding: 6px 10px; margin-bottom: 5px; border-radius: 4px; background: rgba(255,255,255,0.03); font-size: 12px; word-wrap: break-word; }
        .emoji-picker { display: grid; grid-template-columns: repeat(6, 1fr); gap: 5px; background: #1a1a1a; padding: 8px; border-radius: 6px; position: absolute; bottom: 50px; left: 10px; width: 220px; border: 1px solid #333; z-index: 50; box-shadow: 0 -5px 20px rgba(0,0,0,0.5); }
        .emoji-btn { cursor: pointer; text-align: center; padding: 5px; font-size: 18px; border-radius: 4px; }
        .emoji-btn:hover { background: #333; }

        /* INPUTS */
        .cyber-input { background: #111; border: 1px solid #333; color: white; padding: 10px; border-radius: 4px; width: 100%; font-size: 12px; outline: none; transition: 0.3s; }
        .cyber-input:focus { border-color: var(--secondary); box-shadow: 0 0 10px rgba(0, 242, 234, 0.2); }
        .cyber-btn { background: var(--secondary); color: black; font-weight: bold; padding: 10px 20px; border-radius: 4px; font-size: 11px; cursor: pointer; font-family: 'Orbitron'; transition: 0.2s; }
        .cyber-btn:hover { filter: brightness(1.1); transform: scale(1.02); }

        @keyframes fadeIn { from{opacity:0} to{opacity:1} }
    </style>
</head>
<body>

    <header class="h-14 flex justify-between items-center px-4 border-b border-[#222] bg-black shrink-0">
        <div class="flex items-center gap-4">
            <h1 class="text-xl font-orbitron italic tracking-widest text-white">
                <span class="text-[#00f2ea]">STREAMER</span> HUB <span class="bg-[#222] text-[#ff0099] px-2 rounded text-[10px] ml-2 not-italic">V63</span>
            </h1>
            <div id="socket-status" class="text-[10px] font-bold text-gray-500 border border-gray-700 px-2 rounded uppercase">Connecting...</div>
        </div>
        
        <div class="flex items-center gap-3">
             <button id="btn-auth" onclick="startAuth()" class="bg-[#6441a5] hover:bg-[#7d5bbe] text-white px-4 py-1.5 rounded font-bold transition flex items-center gap-2 text-xs font-orbitron border border-[#7d5bbe]">
                <i class="fab fa-twitch"></i> CONNEXION
            </button>
            <div id="user-area" class="hidden flex items-center gap-3 bg-[#111] px-3 py-1 rounded border border-[#333]">
                <img id="user-avatar" src="" class="w-6 h-6 rounded-full border border-[#00f2ea] object-cover">
                <span id="user-name" class="font-bold text-white text-xs"></span>
                <button onclick="logout()" class="text-gray-500 hover:text-white ml-2"><i class="fas fa-sign-out-alt"></i></button>
            </div>
        </div>
    </header>

    <div class="h-48 bg-[#080808] border-b border-[#222] relative shrink-0 group">
        <button onclick="document.getElementById('carousel').scrollLeft -= 300" class="absolute left-0 top-0 h-full w-10 bg-black/60 hover:bg-black/80 z-10 text-white flex items-center justify-center transition opacity-0 group-hover:opacity-100"><i class="fas fa-chevron-left"></i></button>
        <button onclick="document.getElementById('carousel').scrollLeft += 300" class="absolute right-0 top-0 h-full w-10 bg-black/60 hover:bg-black/80 z-10 text-white flex items-center justify-center transition opacity-0 group-hover:opacity-100"><i class="fas fa-chevron-right"></i></button>
        
        <div id="carousel" class="carousel-track h-full items-center" onwheel="this.scrollLeft += event.deltaY; event.preventDefault();">
            <div class="w-full text-center text-gray-500 text-xs font-orbitron">Chargement du flux...</div>
        </div>
    </div>

    <div class="flex-grow grid grid-cols-1 lg:grid-cols-12 gap-0 overflow-hidden">
        
        <div class="col-span-8 bg-black flex flex-col border-r border-[#222]">
            <div class="h-10 bg-[#0e0e10] border-b border-[#222] flex justify-between items-center px-3">
                <div class="flex items-center gap-2">
                    <span id="current-chan" class="font-orbitron text-[#00f2ea] text-xs">OFFLINE</span>
                    <span id="player-mode" class="text-[9px] bg-[#222] text-gray-400 px-1 rounded">AUTO</span>
                </div>
                <div class="flex gap-2">
                    <button onclick="cycle('prev')" class="text-white hover:text-[#00f2ea]"><i class="fas fa-step-backward"></i></button>
                    <button onclick="cycle('next')" class="text-white hover:text-[#00f2ea]"><i class="fas fa-step-forward"></i></button>
                </div>
            </div>
            <div id="twitch-embed" class="flex-grow w-full h-full bg-black relative"></div>
        </div>

        <div class="col-span-4 bg-[#0e0e10] flex flex-col h-full overflow-hidden">
            <div class="flex border-b border-[#222]">
                <button class="tab-btn active" onclick="openTab('chat')">TCHAT</button>
                <button class="tab-btn" onclick="openTab('stats')">STATS</button>
                <button class="tab-btn" onclick="openTab('tools')">OUTILS</button>
            </div>

            <div id="tab-chat" class="tab-content active">
                <div class="flex p-2 gap-2 bg-[#080808] border-b border-[#222]">
                    <button onclick="toggleChat('twitch')" id="btn-chat-twitch" class="flex-1 py-1 text-[10px] font-bold bg-[#6441a5] text-white rounded">TWITCH</button>
                    <button onclick="toggleChat('hub')" id="btn-chat-hub" class="flex-1 py-1 text-[10px] font-bold bg-[#222] text-gray-300 rounded hover:bg-[#333]">HUB SECURE</button>
                </div>
                
                <div id="chat-twitch" class="flex-grow relative w-full h-full">
                    <iframe id="twitch-frame" src="" width="100%" height="100%" frameborder="0"></iframe>
                </div>

                <div id="chat-hub" class="flex-grow hidden flex-col bg-[#111] h-full relative">
                    <div id="hub-msgs" class="flex-grow overflow-y-auto p-3 scrollbar-thin">
                        <div class="text-center text-gray-600 text-[10px] mt-4">Bienvenue sur le canal chiffr√©.</div>
                    </div>
                    
                    <div id="emoji-picker" class="emoji-picker hidden"></div>

                    <form onsubmit="sendMsg(event)" class="p-2 border-t border-[#222] flex gap-2 bg-[#080808] relative shrink-0">
                        <button type="button" onclick="document.getElementById('emoji-picker').classList.toggle('hidden')" class="text-gray-400 hover:text-yellow-400 px-1 text-lg"><i class="far fa-smile"></i></button>
                        <input id="hub-in" class="bg-[#222] text-white text-xs p-2 rounded flex-grow outline-none border border-[#333] focus:border-[#00f2ea]" placeholder="Message...">
                        <button class="text-[#00f2ea] px-2 hover:text-white"><i class="fas fa-paper-plane"></i></button>
                    </form>
                </div>
            </div>

            <div id="tab-stats" class="tab-content p-4 overflow-y-auto space-y-4">
                <div class="grid grid-cols-2 gap-3">
                    <div class="glass p-3 border-l-2 border-[#00f2ea]">
                        <div class="text-[9px] text-gray-500 uppercase font-bold">Viewers</div>
                        <div id="stat-viewers" class="text-xl font-orbitron text-white">--</div>
                    </div>
                    <div class="glass p-3 border-l-2 border-[#ff0099]">
                        <div class="text-[9px] text-gray-500 uppercase font-bold">Cha√Ænes</div>
                        <div id="stat-channels" class="text-xl font-orbitron text-white">--</div>
                    </div>
                </div>
                
                <div class="glass p-3">
                    <h4 class="text-[10px] text-gray-400 mb-2 font-bold uppercase">Tendance (24h)</h4>
                    <div class="h-32"><canvas id="chart1"></canvas></div>
                </div>
                <div class="glass p-3">
                    <h4 class="text-[10px] text-gray-400 mb-2 font-bold uppercase">Top Jeux</h4>
                    <div class="h-32"><canvas id="chart2"></canvas></div>
                </div>
                <div class="glass p-3">
                    <h4 class="text-[10px] text-gray-400 mb-2 font-bold uppercase">Langues</h4>
                    <div class="h-32"><canvas id="chart3"></canvas></div>
                </div>
            </div>

            <div id="tab-tools" class="tab-content p-4 overflow-y-auto">
                
                <div class="flex gap-2 mb-4 overflow-x-auto pb-2 border-b border-[#222]">
                    <button onclick="openTool('scan')" class="tool-btn active" id="btn-tool-scan">SCANNER & AUDIT IA</button>
                    <button onclick="openTool('plan')" class="tool-btn" id="btn-tool-plan">PLANNING OPTIMIZER</button>
                    <button onclick="openTool('raid')" class="tool-btn" id="btn-tool-raid">RAID FINDER</button>
                </div>

                <div id="tool-scan" class="tool-content active">
                    <h3 class="text-[#00f2ea] font-orbitron text-xs mb-3 flex items-center gap-2"><i class="fas fa-search"></i> ANALYSE PROFONDE</h3>
                    <div class="flex gap-2 mb-3">
                        <input id="scan-in" type="text" placeholder="Pseudo du streamer..." class="cyber-input">
                        <button onclick="runScan()" class="cyber-btn"><i class="fas fa-arrow-right"></i></button>
                    </div>
                    <div id="scan-res" class="hidden glass p-3">
                        <div class="flex gap-3 items-center mb-3">
                            <img id="scan-img" src="" class="w-10 h-10 rounded-full border border-[#00f2ea]">
                            <div>
                                <div id="scan-name" class="font-bold text-white text-sm">--</div>
                                <div id="scan-score" class="text-[10px] text-[#00f2ea]">Score IA: --</div>
                            </div>
                        </div>
                        <div id="scan-ai" class="text-[11px] text-gray-400 leading-relaxed bg-black/30 p-2 rounded border border-[#222]"></div>
                    </div>
                </div>

                <div id="tool-plan" class="tool-content">
                    <h3 class="text-[#ffd700] font-orbitron text-xs mb-3 flex items-center gap-2"><i class="fas fa-clock"></i> OPTIMISATION HORAIRE</h3>
                    <div class="flex gap-2 mb-3">
                        <input id="plan-in" type="text" placeholder="Cat√©gorie (ex: Valorant)..." class="cyber-input">
                        <button onclick="runPlan()" class="cyber-btn" style="background:#ffd700; color:black"><i class="fas fa-magic"></i></button>
                    </div>
                    <div id="plan-res" class="hidden glass p-3 text-[11px] text-gray-300"></div>
                </div>

                <div id="tool-raid" class="tool-content">
                    <h3 class="text-[#10b981] font-orbitron text-xs mb-3 flex items-center gap-2"><i class="fas fa-crosshairs"></i> CIBLAGE DE RAID</h3>
                    <div class="flex gap-2 mb-2">
                        <input id="raid-game" type="text" placeholder="Jeu..." class="cyber-input">
                        <input id="raid-max" type="number" placeholder="Max" value="50" class="cyber-input" style="width:60px">
                    </div>
                    <button onclick="runRaid()" class="cyber-btn w-full mb-3" style="background:#10b981">TROUVER UNE CIBLE</button>
                    
                    <div id="raid-res" class="hidden glass p-3 text-center cursor-pointer hover:bg-[#151515] transition border-green-900" onclick="if(window.raidTarget) setChannel(window.raidTarget)">
                        <img id="raid-img" src="" class="w-full h-24 object-cover rounded mb-2 border border-[#333]">
                        <div id="raid-name" class="font-bold text-white text-sm mb-1"></div>
                        <div id="raid-meta" class="text-[10px] text-green-400 mb-2"></div>
                        <div class="text-[9px] bg-green-900 text-white py-1 rounded">CLIQUER POUR LANCER</div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script>
        // --- 1. CONFIGURATION SYSTEME ---
        const API_BASE = window.location.origin;
        const HOST = window.location.hostname;
        // LISTE DES PARENTS POUR EVITER L'ECRAN BLANC TWITCH
        const PARENTS = ["localhost", "127.0.0.1", "justplayer.fr", "www.justplayer.fr"];
        if(!PARENTS.includes(HOST)) PARENTS.push(HOST);

        let player, socket, charts = {};

        // --- 2. INIT ---
        window.onload = () => {
            initSocket();
            initEmojis();
            loadCarousel();
            loadStats();
            initPlayer();
            // Auth Callback
            window.addEventListener("message", (e) => { if(e.data === "auth_success") window.location.reload(); });
        };

        // --- 3. PLAYER TWITCH (R√©par√©) ---
        async function initPlayer() {
            try {
                const res = await fetch('/get_default_stream');
                const data = await res.json();
                setChannel(data.channel || 'twitch');
                document.getElementById('player-mode').innerText = data.mode || "AUTO";
            } catch(e) { console.log("Player offline"); }
        }

        function setChannel(channel) {
            document.getElementById('current-chan').innerText = channel.toUpperCase();
            document.getElementById('twitch-embed').innerHTML = "";
            
            // Cr√©ation Embed
            player = new Twitch.Embed("twitch-embed", {
                width: "100%", height: "100%", channel: channel, layout: "video", parent: PARENTS
            });

            // Tchat URL avec Parents
            const p = PARENTS.map(d=>`parent=${d}`).join('&');
            document.getElementById('twitch-frame').src = `https://www.twitch.tv/embed/${channel}/chat?${p}&darkpopout`;
        }

        async function cycle(dir) {
            const res = await fetch('/cycle_stream', {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({direction:dir})});
            const d = await res.json();
            if(d.success) setChannel(d.channel);
        }

        // --- 4. CAROUSEL (Fix Undefined) ---
        async function loadCarousel() {
            try {
                const res = await fetch('/followed_streams');
                const data = await res.json();
                const el = document.getElementById('carousel');
                el.innerHTML = "";
                
                if(data.streams) {
                    data.streams.forEach(s => {
                        // Backend V50/62 envoie 'user_name' et 'thumbnail_url'
                        const thumb = s.thumbnail_url.replace('{width}', '320').replace('{height}', '180');
                        el.innerHTML += `
                        <div class="stream-card flex-shrink-0" onclick="setChannel('${s.user_login}')">
                            <img src="${thumb}">
                            <div class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black to-transparent p-2">
                                <div class="font-bold text-white text-xs truncate">${s.user_name}</div>
                                <div class="text-[#00f2ea] text-[10px] truncate">${s.game_name}</div>
                            </div>
                            <div class="absolute top-2 right-2 bg-red-600 text-white text-[9px] font-bold px-1.5 rounded">LIVE</div>
                        </div>`;
                    });
                }
            } catch(e) {}
        }

        // --- 5. TCHAT HUB & SMILEYS ---
        function initSocket() {
            try {
                socket = io();
                socket.on('connect', () => { document.getElementById('socket-status').innerText = "ONLINE"; document.getElementById('socket-status').className = "text-[10px] font-bold text-[#00f2ea] border border-[#00f2ea] px-2 rounded uppercase"; });
                socket.on('chat message', (m) => {
                    const b = document.getElementById('hub-msgs');
                    b.innerHTML += `<div class="hub-msg"><strong class="text-[#00f2ea]">${m.user}:</strong> ${m.text}</div>`;
                    b.scrollTop = b.scrollHeight;
                });
            } catch(e) {}
        }

        function initEmojis() {
            const emojis = ['üòÄ','üòÇ','üî•','‚ù§Ô∏è','üëç','üéâ','üò≠','üëÄ','üöÄ','üíÄ','üí©','ü§°'];
            const container = document.getElementById('emoji-picker');
            emojis.forEach(e => {
                const div = document.createElement('div');
                div.className = "emoji-btn"; div.innerText = e;
                div.onclick = () => { document.getElementById('hub-in').value += e; container.classList.add('hidden'); };
                container.appendChild(div);
            });
        }

        function sendMsg(e) {
            e.preventDefault();
            const i = document.getElementById('hub-in');
            if(i.value && socket){ socket.emit('chat message', i.value); 
            // Local echo
            const b = document.getElementById('hub-msgs');
            b.innerHTML += `<div class="hub-msg border-l-2 border-[#ff0099]"><strong class="text-[#ff0099]">Moi:</strong> ${i.value}</div>`;
            b.scrollTop = b.scrollHeight;
            i.value=""; }
        }

        // --- 6. STATS (Connect√©es) ---
        async function loadStats() {
            try {
                // Global
                const r1 = await fetch('/api/stats/global'); const d1 = await r1.json();
                document.getElementById('kpi-viewers').innerText = d1.total_viewers.toLocaleString();
                document.getElementById('kpi-channels').innerText = d1.total_channels;
                createChart('chart1', 'line', d1.history.live.labels, d1.history.live.values, '#00f2ea', true);

                // Games (Route V50)
                const r2 = await fetch('/api/stats/top_games'); const d2 = await r2.json();
                const gameLabels = d2.games.map(g => g.name);
                createChart('chart2', 'bar', gameLabels, [100, 80, 60, 45, 30], '#ff0099', false);

                // Langs
                const r3 = await fetch('/api/stats/languages'); const d3 = await r3.json();
                const langLabels = d3.languages.map(l => l.name);
                const langData = d3.languages.map(l => l.percent);
                createChart('chart3', 'doughnut', langLabels, langData, ['#00f2ea', '#ff0099', '#ffd700', '#ffffff'], false);
            } catch(e) {}
        }

        function createChart(id, type, labels, data, colors, fill) {
            if(charts[id]) charts[id].destroy();
            const ctx = document.getElementById(id).getContext('2d');
            charts[id] = new Chart(ctx, {
                type: type,
                data: { labels: labels, datasets: [{ data: data, backgroundColor: type==='line'?'rgba(0,242,234,0.1)':colors, borderColor: Array.isArray(colors)?'#000':colors, fill: fill, tension: 0.4 }] },
                options: { responsive:true, maintainAspectRatio:false, plugins:{legend:{display:false}}, scales:{x:{display:false}, y:{display:false}} }
            });
        }

        // --- 7. OUTILS ---
        function openTool(id) {
            document.querySelectorAll('.tool-content').forEach(e=>e.classList.remove('active'));
            document.querySelectorAll('.tool-btn').forEach(e=>e.classList.remove('active'));
            document.getElementById('tool-'+id).classList.add('active');
            document.getElementById('btn-tool-'+id).classList.add('active');
        }

        async function runScan() {
            const q = document.getElementById('scan-in').value;
            const res = await fetch('/scan_target', {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({query:q})});
            const d = await res.json();
            document.getElementById('scan-res').classList.remove('hidden');
            document.getElementById('scan-name').innerText = d.user_data.display_name;
            document.getElementById('scan-img').src = d.user_data.profile_image_url;
            document.getElementById('scan-score').innerText = "Score: " + d.user_data.ai_calculated_niche_score;
            
            const ai = await fetch('/critique_ia', {method:'POST'});
            const dai = await ai.json();
            document.getElementById('scan-ai').innerHTML = dai.html_response;
        }

        async function runPlan() {
            const g = document.getElementById('plan-in').value;
            const res = await fetch('/analyze_schedule', {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({game:g})});
            const d = await res.json();
            document.getElementById('plan-res').classList.remove('hidden');
            document.getElementById('plan-res').innerHTML = d.html_response;
        }

        async function runRaid() {
            const g = document.getElementById('raid-game').value;
            const res = await fetch('/start_raid', {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({game:g})});
            const d = await res.json();
            if(d.success) {
                window.raidTarget = d.target.login;
                document.getElementById('raid-res').classList.remove('hidden');
                document.getElementById('raid-name').innerText = d.target.name;
                document.getElementById('raid-img').src = d.target.thumbnail_url;
                document.getElementById('raid-meta').innerText = d.target.viewers + " Viewers";
            }
        }

        // --- AUTH ---
        async function checkAuth() {
            const res = await fetch('/twitch_user_status');
            const d = await res.json();
            if(d.is_connected) {
                document.getElementById('btn-auth').classList.add('hidden');
                document.getElementById('user-area').classList.remove('hidden');
                document.getElementById('user-name').innerText = d.display_name;
                // Get avatar via internal scan
                const s = await fetch('/scan_target', {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({query:d.display_name})});
                const sd = await s.json();
                if(sd.success) document.getElementById('user-avatar').src = sd.user_data.profile_image_url;
                loadCarousel();
            }
        }
        function startAuth() { window.open('/twitch_auth_start', 'login', 'width=500,height=700'); }
        function logout() { fetch('/twitch_logout', {method:'POST'}).then(()=>location.reload()); }

        // UTILS
        function openTab(id) {
            document.querySelectorAll('.tab-content').forEach(e=>e.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(e=>e.classList.remove('active'));
            document.getElementById('tab-'+id).classList.add('active');
            // Highlight
            const btns = document.querySelectorAll('.tab-btn');
            btns.forEach(b => { if(b.innerText.toLowerCase().includes(id) || (id==='tools' && b.innerText.includes('OUTILS'))) b.classList.add('active'); });
        }
        function toggleChat(m){
            if(m==='hub'){document.getElementById('chat-twitch').classList.add('hidden');document.getElementById('chat-hub').classList.remove('hidden');document.getElementById('chat-hub').classList.add('flex'); document.getElementById('btn-chat-hub').classList.add('bg-[#00f2ea]','text-black'); document.getElementById('btn-chat-twitch').classList.remove('bg-[#6441a5]');}
            else{document.getElementById('chat-hub').classList.add('hidden');document.getElementById('chat-hub').classList.remove('flex');document.getElementById('chat-twitch').classList.remove('hidden'); document.getElementById('btn-chat-twitch').classList.add('bg-[#6441a5]'); document.getElementById('btn-chat-hub').classList.remove('bg-[#00f2ea]','text-black');}
        }
    </script>
</body>
</html>
