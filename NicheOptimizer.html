<!DOCTYPE html>
<html lang="fr">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Streamer & Niche AI Hub V6.5 - Robuste</title>
Â  Â  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
Â  Â  <script src="https://cdn.tailwindcss.com"></script>
Â  Â  <style>
Â  Â  Â  Â  /* Styles Globaux */
Â  Â  Â  Â  :host, html {
Â  Â  Â  Â  Â  Â  -webkit-text-size-adjust: 100%;
Â  Â  Â  Â  Â  Â  text-size-adjust: 100%;
Â  Â  Â  Â  }
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  background-color: #0d0d0d;
Â  Â  Â  Â  Â  Â  color: #fff;
Â  Â  Â  Â  Â  Â  font-family: 'Inter', Arial, sans-serif;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  padding: 0;
Â  Â  Â  Â  }
Â  Â  Â  Â  #twitch-lucky-main {
Â  Â  Â  Â  Â  Â  all: initial;
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  Â  Â  max-width: 1200px;
Â  Â  Â  Â  Â  Â  margin: 20px auto;
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  font-family: 'Inter', sans-serif;
Â  Â  Â  Â  }
Â  Â  Â  Â  h1 {
Â  Â  Â  Â  Â  Â  font-family: 'Orbitron', sans-serif;
Â  Â  Â  Â  Â  Â  font-size: 28px;
Â  Â  Â  Â  Â  Â  color: #ff0099;
Â  Â  Â  Â  Â  Â  margin-bottom: 5px;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  /* Styles spÃ©cifiques au Lecteur */
Â  Â  Â  Â  .player-wrapper {
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  Â  Â  padding: 15px;
Â  Â  Â  Â  Â  Â  background: #1a1a1a;
Â  Â  Â  Â  Â  Â  border-radius: 12px;
Â  Â  Â  Â  Â  Â  border: 1px solid #2e2e2e;
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
Â  Â  Â  Â  }
Â  Â  Â  Â  .player-wrapper h2 {
Â  Â  Â  Â  Â  Â  font-family: 'Orbitron', sans-serif;
Â  Â  Â  Â  Â  Â  font-size: 20px;
Â  Â  Â  Â  Â  Â  color: #22c7ef;
Â  Â  Â  Â  Â  Â  margin: 0 0 10px;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  }
Â  Â  Â  Â  #player-channel-status {
Â  Â  Â  Â  Â  Â  font-size: 12px;
Â  Â  Â  Â  Â  Â  color: #9aa3a8;
Â  Â  Â  Â  Â  Â  margin-left: auto;
Â  Â  Â  Â  Â  Â  font-weight: normal;
Â  Â  Â  Â  Â  Â  font-family: 'Inter', sans-serif;
Â  Â  Â  Â  }
Â  Â  Â  Â  #twitch-embed {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 450px;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 15px rgba(34, 199, 239, 0.3);
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  }
Â  Â  Â  Â  #form-channel-player {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  gap: 8px;
Â  Â  Â  Â  Â  Â  margin-bottom: 15px;
Â  Â  Â  Â  }
Â  Â  Â  Â  #input-channel {
Â  Â  Â  Â  Â  Â  flex-grow: 1;
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  border-radius: 6px;
Â  Â  Â  Â  Â  Â  border: 1px solid #333;
Â  Â  Â  Â  Â  Â  background: #0d0d0d;
Â  Â  Â  Â  Â  Â  color: #fff;
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  }
Â  Â  Â  Â  #btn-player-launch {
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  border: 0;
Â  Â  Â  Â  Â  Â  padding: 8px 12px;
Â  Â  Â  Â  Â  Â  border-radius: 6px;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  transition: all 0.2s ease;
Â  Â  Â  Â  Â  Â  text-transform: uppercase;
Â  Â  Â  Â  Â  Â  font-size: 13px;
Â  Â  Â  Â  Â  Â  background: #22c7ef;
Â  Â  Â  Â  Â  Â  color: #00161d;
Â  Â  Â  Â  Â  Â  min-width: 100px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 2px 5px rgba(34, 199, 239, 0.4);
Â  Â  Â  Â  }
Â  Â  Â  Â  #btn-player-launch:disabled {
Â  Â  Â  Â  Â  Â  background: #555;
Â  Â  Â  Â  Â  Â  cursor: not-allowed;
Â  Â  Â  Â  Â  Â  box-shadow: none;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Onglets */
Â  Â  Â  Â  .tab-btn {
Â  Â  Â  Â  Â  Â  font-family: 'Orbitron', sans-serif;
Â  Â  Â  Â  Â  Â  padding: 12px 15px;
Â  Â  Â  Â  Â  Â  background: #111;
Â  Â  Â  Â  Â  Â  border: 1px solid #333;
Â  Â  Â  Â  Â  Â  border-bottom: none;
Â  Â  Â  Â  Â  Â  color: #9aa3a8;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  border-radius: 8px 8px 0 0;
Â  Â  Â  Â  Â  Â  transition: all 0.2s;
Â  Â  Â  Â  Â  Â  flex: 1;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  font-size: 12px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .tab-btn.active {
Â  Â  Â  Â  Â  Â  background: #1a1a1a;
Â  Â  Â  Â  Â  Â  color: #fff;
Â  Â  Â  Â  Â  Â  border-top: 3px solid #ff0099;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  }
Â  Â  Â  Â  .tab-content {
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  Â  Â  background: #1a1a1a;
Â  Â  Â  Â  Â  Â  border: 1px solid #2e2e2e;
Â  Â  Â  Â  Â  Â  border-top: none;
Â  Â  Â  Â  Â  Â  border-radius: 0 0 10px 10px;
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .tab-content.active {
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  /* Inputs & Boutons */
Â  Â  Â  Â  .action-input {
Â  Â  Â  Â  Â  Â  width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #333;
Â  Â  Â  Â  Â  Â  background: #0d0d0d; color: #fff; font-size: 13px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn-primary {
Â  Â  Â  Â  Â  Â  background: #ff0099; color: #fff; border: 0; padding: 8px 12px; border-radius: 6px;
Â  Â  Â  Â  Â  Â  cursor: pointer; font-weight: 600; text-transform: uppercase; font-size: 12px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 6px rgba(255,0,153,.4);
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn-primary:hover:not(:disabled) { background: #E6008A; }
Â  Â  Â  Â  .btn-secondary {
Â  Â  Â  Â  Â  Â  background: #22c7ef; color: #00161d; border: 0; padding: 8px 12px; border-radius: 6px;
Â  Â  Â  Â  Â  Â  cursor: pointer; font-weight: 600; text-transform: uppercase; font-size: 12px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 6px rgba(34,199,239,.4);
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn-secondary:hover:not(:disabled) { background: #1eafdd; }
Â  Â  Â  Â  
Â  Â  Â  Â  .ai-result-box {
Â  Â  Â  Â  Â  Â  background: #0a0a0a; border: 1px solid #59d682; border-radius: 6px; padding: 15px; margin-top: 15px;
Â  Â  Â  Â  Â  Â  color: #ffffff;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  /* Styles IA */
Â  Â  Â  Â  .ai-niche-output { color: #ffffff !important; line-height: 1.6; font-size: 13px; }
Â  Â  Â  Â  .ai-niche-output strong { color: #ff0099; }
Â  Â  Â  Â  
Â  Â  Â  Â  /* Liste des streams suivis */
Â  Â  Â  Â  .followed-stream-item {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center; /* Aligner les Ã©lÃ©ments verticalement */
Â  Â  Â  Â  Â  Â  justify-content: flex-start; /* Alignement de base */
Â  Â  Â  Â  Â  Â  padding: 10px 15px;
Â  Â  Â  Â  Â  Â  margin-bottom: 8px;
Â  Â  Â  Â  Â  Â  background: #111;
Â  Â  Â  Â  Â  Â  border-radius: 6px;
Â  Â  Â  Â  Â  Â  border-left: 4px solid #ff0099;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: background 0.2s, transform 0.1s;
Â  Â  Â  Â  }
Â  Â  Â  Â  .followed-stream-item:hover {
Â  Â  Â  Â  Â  Â  background: #280517;
Â  Â  Â  Â  Â  Â  transform: translateY(-1px);
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  /* --- Styles pour l'avatar --- */
Â  Â  Â  Â  .streamer-avatar {
Â  Â  Â  Â  Â  Â  width: 45px; /* Taille de l'avatar */
Â  Â  Â  Â  Â  Â  height: 45px;
Â  Â  Â  Â  Â  Â  border-radius: 50%; /* Rendre l'image ronde */
Â  Â  Â  Â  Â  Â  border: 2px solid #ff0099; /* Bordure d'accent */
Â  Â  Â  Â  Â  Â  object-fit: cover; /* Assure que l'image couvre bien la zone */
Â  Â  Â  Â  Â  Â  flex-shrink: 0; /* EmpÃªche l'avatar de se rÃ©trÃ©cir */
Â  Â  Â  Â  }

Â  Â  Â  Â  /* NOUVEAUX STYLES POUR LA DISPOSITION VERTICALE DES INFOS */
Â  Â  Â  Â  .stream-details {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column; /* Nom, viewers, jeu empilÃ©s */
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  flex-grow: 1; /* Permet aux dÃ©tails de prendre l'espace */
Â  Â  Â  Â  Â  Â  margin-left: 15px; /* Espace entre l'avatar et les infos */
Â  Â  Â  Â  Â  Â  min-width: 0; /* Important pour que l'overflow ellipsis fonctionne */
Â  Â  Â  Â  }

Â  Â  Â  Â  .stream-name {
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  Â  Â  color: #fff;
Â  Â  Â  Â  Â  Â  white-space: nowrap;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  text-overflow: ellipsis;
Â  Â  Â  Â  Â  Â  line-height: 1.2;
Â  Â  Â  Â  }

Â  Â  Â  Â  .stream-meta {
Â  Â  Â  Â  Â  Â  font-size: 11px;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column; /* Spectateurs et jeu empilÃ©s */
Â  Â  Â  Â  Â  Â  line-height: 1.4;
Â  Â  Â  Â  Â  Â  margin-top: 2px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .stream-viewers {
Â  Â  Â  Â  Â  Â  color: #ff0099; /* Rouge Twitch pour les viewers */
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  }

Â  Â  Â  Â  .stream-game {
Â  Â  Â  Â  Â  Â  color: #aaa; /* Gris pour le jeu */
Â  Â  Â  Â  Â  Â  white-space: nowrap;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  text-overflow: ellipsis;
Â  Â  Â  Â  }
Â  Â  Â  Â  /* FIN DES NOUVEAUX STYLES */

Â  Â  Â  Â  @media (max-width: 768px) {
Â  Â  Â  Â  Â  Â  #twitch-embed { height: 300px; }
Â  Â  Â  Â  Â  Â  h1 { font-size: 22px; }
Â  Â  Â  Â  Â  Â  .tab-btn { padding: 8px 10px; font-size: 10px; flex-basis: 50%; max-width: 50%; }
Â  Â  Â  Â  Â  Â  .flex-tabs { flex-wrap: wrap; }
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>

<div id="twitch-lucky-main">
Â  Â  <h1 class="text-3xl"><span style="color:#22c7ef;">STREAMER</span> HUB V6.5</h1>
Â  Â  <div style="color:#9aa3a8;font-size:12px;margin-bottom:15px;text-align:center;">Lecteur â€¢ Scan & IA â€¢ Niche â€¢ Repurposing â€¢ Croissance</div>

Â  Â  <div class="player-wrapper">
Â  Â  Â  Â  <h2>
Â  Â  Â  Â  Â  Â  <span style="margin-right:6px;" id="player-icon">ğŸ¬</span> LECTEUR
Â  Â  Â  Â  Â  Â  <span id="player-channel-status"></span>
Â  Â  Â  Â  </h2>Â 
Â  Â  Â  Â  <form id="form-channel-player">
Â  Â  Â  Â  Â  Â  <input id="input-channel" type="text" placeholder="Nom de la chaÃ®ne Twitch (ex: gotaga)" title="Nom de la chaÃ®ne Twitch Ã  regarder">
Â  Â  Â  Â  Â  Â  <button type="submit" id="btn-player-launch">â–¶ï¸ LANCER</button>
Â  Â  Â  Â  </form>
Â  Â  Â  Â  <div id="twitch-embed"></div>
Â  Â  </div>

Â  Â  <div id="tabs-container">
Â  Â  Â  Â  <div class="flex flex-wrap flex-tabs">
Â  Â  Â  Â  Â  Â  <button class="tab-btn" data-tab-id="tab-followed" onclick="openTab('tab-followed')">ğŸ”‘ MON FIL SUIVI</button>Â 
Â  Â  Â  Â  Â  Â  <button class="tab-btn" data-tab-id="tab-cible" onclick="openTab('tab-cible')">ğŸ¯ SCAN & RESULTATS</button>
Â  Â  Â  Â  Â  Â  <button class="tab-btn" data-tab-id="tab-niche" onclick="openTab('tab-niche')">ğŸ“ˆ OPTIMISATION NICHE</button>
Â  Â  Â  Â  Â  Â  <button class="tab-btn" data-tab-id="tab-repurpose" onclick="openTab('tab-repurpose')">ğŸš€ REPURPOSING</button>
Â  Â  Â  Â  Â  Â  <button class="tab-btn" data-tab-id="tab-growth" onclick="openTab('tab-growth')">ğŸ’° CROISSANCE</button>
Â  Â  Â  Â  Â  Â  <button class="tab-btn" data-tab-id="tab-boost" onclick="openTab('tab-boost')">âš¡ BOOST</button>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="tab-followed" class="tab-content">
Â  Â  Â  Â  Â  Â  <h3 style="color:#ff0099; font-family:'Orbitron',sans-serif; margin-bottom:15px; font-size:16px;">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="icon">ğŸ”‘</span> Connexion & Mon Fil Suivi
Â  Â  Â  Â  Â  Â  </h3>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <div style="padding:15px; background:#111; border-radius:8px; margin-bottom:20px; border: 1px solid #444;">
Â  Â  Â  Â  Â  Â  Â  Â  <h4 style="color: #22c7ef; font-size: 14px; margin-bottom: 10px; font-weight: bold;">Connexion Utilisateur Twitch (OAuth)</h4>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <p id="login-status" style="color:#ff9900; font-size:12px; margin-bottom:15px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Statut: VÃ©rification...
Â  Â  Â  Â  Â  Â  Â  Â  </p>

Â  Â  Â  Â  Â  Â  Â  Â  <button id="btn-twitch-login" class="btn-primary" style="background:#6441a5; width:100%; padding: 12px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ğŸ”’ SE CONNECTER VIA TWITCH
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <div style="margin-top:25px; border-top: 1px solid #333; padding-top:20px;">
Â  Â  Â  Â  Â  Â  Â  Â  <h4 style="color: #ff0099; font-family:'Orbitron',sans-serif; margin-bottom:15px; font-size:16px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="icon">ğŸ”´</span> Vos ChaÃ®nes Suivies LIVE
Â  Â  Â  Â  Â  Â  Â  Â  </h4>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="followed-streams-list">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="color:#555; text-align:center; padding:10px;">Chargement du fil...</p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="tab-cible" class="tab-content">
Â  Â  Â  Â  Â  Â  <h3 style="color:#22c7ef; font-family:'Orbitron',sans-serif; margin-bottom:15px; font-size:16px;">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="icon">ğŸ”­</span> Configuration & Scan
Â  Â  Â  Â  Â  Â  </h3>
Â  Â  Â  Â  Â  Â  <form id="form-target" style="display:flex; gap:8px; margin-bottom:10px;">
Â  Â  Â  Â  Â  Â  Â  Â  <input id="input-target" type="text" placeholder="Jeu ou Pseudo" class="action-input">
Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" id="btn-target" class="btn-secondary" style="min-width:80px;">ğŸ¯ CIBLER</button>
Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  <div id="scan-result-placeholder" style="text-align:center; color:#555; padding:20px; border: 1px dashed #333; border-radius: 6px;">
Â  Â  Â  Â  Â  Â  Â  Â  Les rÃ©sultats du scan apparaÃ®tront ici. (RÃ©sultats rÃ©els de l'API)
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div id="scan-result" class="hidden"></div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="tab-niche" class="tab-content">
Â  Â  Â  Â  Â  Â  <h3 style="color:#59d682; font-family:'Orbitron',sans-serif; margin-bottom:15px; font-size:16px;">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="icon">ğŸ“ˆ</span> Analyse de Niche
Â  Â  Â  Â  Â  Â  </h3>
Â  Â  Â  Â  Â  Â  <form id="form-niche-analysis" style="display:flex; gap:8px; margin-bottom:10px;">
Â  Â  Â  Â  Â  Â  Â  Â  <input id="input-niche-game" type="text" placeholder="Jeu Ã  Analyser (ex: Starfield)" class="action-input">
Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" id="btn-niche-analyse" class="btn-primary" style="min-width:120px; background:#59d682;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  âœ¨ ANALYSER
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  <div id="niche-result-container" class="ai-result-box" style="border-color: #59d682; display:none;">
Â  Â  Â  Â  Â  Â  Â  Â  <div id="niche-results"></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  Â  Â  <div id="tab-repurpose" class="tab-content">
Â  Â  Â  Â  Â  Â  <h3 style="color:#9933ff; font-family:'Orbitron',sans-serif; margin-bottom:15px; font-size:16px;">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="icon">âœ‚ï¸</span> Repurposing IA
Â  Â  Â  Â  Â  Â  </h3>
Â  Â  Â  Â  Â  Â  <form id="form-repurpose" style="display:flex; gap:8px; margin-bottom:10px; flex-direction: column;">
Â  Â  Â  Â  Â  Â  Â  Â  <input id="input-repurpose-channel" type="text" placeholder="Pseudo du Streamer" class="action-input">
Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" id="btn-repurpose-analyse" class="btn-primary" style="background:#9933ff; padding: 12px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ğŸš€ ANALYSER VOD
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  <div id="repurpose-result-container" class="ai-result-box" style="border-color: #9933ff; display:none;">
Â  Â  Â  Â  Â  Â  Â  Â  <div id="repurpose-results"></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="tab-growth" class="tab-content">
Â  Â  Â  Â  Â  Â  <h3 style="color:#ffcc00; font-family:'Orbitron',sans-serif; margin-bottom:20px; font-size:16px;">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="icon">ğŸ’°</span> Tableau de Bord Croissance
Â  Â  Â  Â  Â  Â  </h3>
Â  Â  Â  Â  Â  Â  <div style="padding:15px; background:#111; border-radius:8px; margin-bottom:20px; border: 1px solid #444;">
Â  Â  Â  Â  Â  Â  Â  Â  <button id="btn-trend-detector" class="btn-primary" style="background:#ffcc00; color: #111; width:100%; padding: 12px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ğŸ”® DÃ‰TECTER LA PROCHAINE NICHE
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="trend-results" class="ai-result-box" style="border-color: #ffcc00; display:none;"></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="tab-boost" class="tab-content">
Â  Â  Â  Â  Â  Â  <h3 style="color:#ff0099; font-family:'Orbitron',sans-serif; margin-bottom:15px; font-size:16px;">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="icon">â¬†ï¸</span> STREAM BOOST
Â  Â  Â  Â  Â  Â  </h3>
Â  Â  Â  Â  Â  Â  <div style="padding:15px; background:#111; border-radius:8px; margin-bottom:20px; border: 1px solid #444;">
Â  Â  Â  Â  Â  Â  Â  Â  <form id="form-boost" style="display:flex; gap:8px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input id="input-boost" type="text" placeholder="ChaÃ®ne Ã  promouvoir" class="action-input">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" id="btn-boost" class="btn-primary" style="min-width:100px;">ğŸ“¤ BOOST</button>
Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  </div>
</div>

<script src="https://embed.twitch.tv/embed/v1.js"></script>
<script>
Â  Â  // --- Configuration Globale ---
Â  Â  const API_BASE = window.location.origin;
Â  Â  const DEFAULT_CHANNEL = 'twitch';Â 

Â  Â  // --- Gestion des Onglets ---
Â  Â  function openTab(tabId) {
Â  Â  Â  Â  localStorage.setItem('activeTab', tabId);
Â  Â  Â  Â  document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
Â  Â  Â  Â  document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
Â  Â  Â  Â  
Â  Â  Â  Â  const targetTab = document.getElementById(tabId);
Â  Â  Â  Â  if (targetTab) {
Â  Â  Â  Â  Â  Â  targetTab.classList.add('active');
Â  Â  Â  Â  Â  Â  const targetBtn = document.querySelector(`.tab-btn[data-tab-id="${tabId}"]`);
Â  Â  Â  Â  Â  Â  if (targetBtn) targetBtn.classList.add('active');
Â  Â  Â  Â  }
Â  Â  }

Â  Â  // --- Lecteur Twitch ---
Â  Â  let embed = null;
Â  Â  const twitchEmbedContainer = document.getElementById('twitch-embed');
Â  Â  const inputChannel = document.getElementById('input-channel');

Â  Â  function launchPlayer(channelName) {
Â  Â  Â  Â  if (!channelName) return;

Â  Â  Â  Â  localStorage.setItem('activeChannel', channelName);
Â  Â  Â  Â  inputChannel.value = channelName;

Â  Â  Â  Â  twitchEmbedContainer.innerHTML = '';
Â  Â  Â  Â  embed = new Twitch.Embed("twitch-embed", {
Â  Â  Â  Â  Â  Â  width: "100%",
Â  Â  Â  Â  Â  Â  height: 450,
Â  Â  Â  Â  Â  Â  channel: channelName,
Â  Â  Â  Â  Â  Â  layout: "video",
Â  Â  Â  Â  Â  Â  autoplay: true,
Â  Â  Â  Â  });
Â  Â  Â  Â  document.getElementById('player-channel-status').textContent = `ChaÃ®ne: ${channelName.toUpperCase()}`;
Â  Â  }

Â  Â  function initializePlayer() {
Â  Â  Â  Â  const storedChannel = localStorage.getItem('activeChannel');
Â  Â  Â  Â  const channelToLoad = storedChannel || DEFAULT_CHANNEL;
Â  Â  Â  Â  launchPlayer(channelToLoad);
Â  Â  }
Â  Â  
Â  Â  document.getElementById('form-channel-player').addEventListener('submit', (e) => {
Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  const channel = inputChannel.value.trim().toLowerCase();
Â  Â  Â  Â  if(channel) {
Â  Â  Â  Â  Â  Â  launchPlayer(channel);
Â  Â  Â  Â  }
Â  Â  });

Â  Â  // --- Authentification Twitch et Fil Suivi ---
Â  Â  const btnLogin = document.getElementById('btn-twitch-login');
Â  Â  const loginStatus = document.getElementById('login-status');
Â  Â  const followedStreamsList = document.getElementById('followed-streams-list');
Â  Â  let twitchUserConnected = false;Â 

Â  Â  async function checkAuth() {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const res = await fetch(`${API_BASE}/twitch_user_status`);
Â  Â  Â  Â  Â  Â  if(res.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  const data = await res.json();
Â  Â  Â  Â  Â  Â  Â  Â  if(data.is_connected) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  twitchUserConnected = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  loginStatus.innerHTML = `âœ… ConnectÃ© en tant que <strong style="color:#22c7ef">${data.username}</strong>`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  btnLogin.textContent = "ğŸ”’ DÃ‰CONNEXION";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  btnLogin.style.background = "#e34a64";Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  loadFollowedStreams();Â 
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  twitchUserConnected = false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  loginStatus.textContent = "Statut: DÃ©connectÃ©.";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  btnLogin.textContent = "ğŸ”’ SE CONNECTER VIA TWITCH";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  btnLogin.style.background = "#6441a5";Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  followedStreamsList.innerHTML = '<p style="color:#ff9900; text-align:center;">Veuillez vous connecter pour voir ceci.</p>';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  twitchUserConnected = false;
Â  Â  Â  Â  Â  Â  Â  Â  loginStatus.innerHTML = `âŒ Erreur API (${res.status}). Veuillez vÃ©rifier le serveur backend.`;
Â  Â  Â  Â  Â  Â  Â  Â  followedStreamsList.innerHTML = '<p style="color:red; text-align:center;">Erreur de connexion au service Twitch.</p>';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  } catch(e) {
Â  Â  Â  Â  Â  Â  console.error("Erreur check auth:", e);
Â  Â  Â  Â  Â  Â  twitchUserConnected = false;
Â  Â  Â  Â  Â  Â  loginStatus.innerHTML = `âŒ Erreur technique: ${e.message}.`;
Â  Â  Â  Â  Â  Â  followedStreamsList.innerHTML = `<p style="color:red; text-align:center;">Erreur API: ${e.message}</p>`;
Â  Â  Â  Â  }
Â  Â  }

Â  Â  btnLogin.addEventListener('click', () => {
Â  Â  Â  Â  if(twitchUserConnected) {
Â  Â  Â  Â  Â  Â  window.location.href = `${API_BASE}/twitch_logout`;
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  window.location.href = `${API_BASE}/twitch_auth_start`;
Â  Â  Â  Â  }
Â  Â  });

Â  Â  // --- FONCTION DE PRODUCTION POUR CHARGER LES STREAMS (AVEC NOUVEL AFFICHAGE) ---
Â  Â  async function loadFollowedStreams() {
Â  Â  Â  Â  if(!twitchUserConnected) {
Â  Â  Â  Â  Â  Â  followedStreamsList.innerHTML = '<p style="color:#ff9900; text-align:center;">Veuillez vous connecter pour voir ceci.</p>';
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  followedStreamsList.innerHTML = '<p style="text-align:center; color:#555;">Chargement des streams en direct...</p>';
Â  Â  Â  Â  
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const res = await fetch(`${API_BASE}/followed_streams`);
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if(res.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  const data = await res.json();
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  if(data.data && data.data.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  followedStreamsList.innerHTML = ''; // Vider
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data.data.forEach(stream => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const div = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  div.className = 'followed-stream-item';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Utilise stream.profile_image_url du backend
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const avatarUrl = stream.profile_image_url || 'https://static-cdn.jtvnw.net/jtv_user_pictures/default_profile.png'; 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  div.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="${avatarUrl}" alt="Avatar de ${stream.user_name}" class="streamer-avatar">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="stream-details">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="stream-name" title="${stream.user_name}">${stream.user_name}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="stream-meta">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="stream-viewers">ğŸ”´ ${stream.viewer_count} spectateurs</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="stream-game" title="${stream.game_name}">${stream.game_name}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  div.onclick = () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  launchPlayer(stream.user_name);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  followedStreamsList.appendChild(div);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  followedStreamsList.innerHTML = '<p style="text-align:center;">Aucun stream en direct parmi vos chaÃ®nes suivies.</p>';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  followedStreamsList.innerHTML = `<p style="color:red; text-align:center;">Erreur chargement du fil (Statut: ${res.status}).</p>`;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  } catch(e) {
Â  Â  Â  Â  Â  Â  followedStreamsList.innerHTML = `<p style="color:red; text-align:center;">Erreur API: ${e.message}</p>`;
Â  Â  Â  Â  }
Â  Â  }


Â  Â  // --- Logique d'interaction IA (Code de production) ---

Â  Â  // 1. Analyse de Niche 
Â  Â  document.getElementById('form-niche-analysis').addEventListener('submit', async (e) => {
Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  const game = document.getElementById('input-niche-game').value.trim();
Â  Â  Â  Â  const resultBox = document.getElementById('niche-results');
Â  Â  Â  Â  const container = document.getElementById('niche-result-container');
Â  Â  Â  Â  const btn = document.getElementById('btn-niche-analyse');

Â  Â  Â  Â  if (!game) return;

Â  Â  Â  Â  container.style.display = 'block';
Â  Â  Â  Â  resultBox.innerHTML = '<p style="color:#ffcc00;">Analyse IA de niche en cours pour ' + game + '... (Appel API rÃ©el)</p>';
Â  Â  Â  Â  btn.disabled = true;

Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const res = await fetch(`${API_BASE}/critique_ia`, {
Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  headers: {'Content-Type': 'application/json'},
Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ game: game, type: 'niche' })
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  if(res.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  const data = await res.json();
Â  Â  Â  Â  Â  Â  Â  Â  resultBox.innerHTML = data.html_critique || data.error || '<p>RÃ©ponse IA reÃ§ue, mais le format est inattendu.</p>';
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  resultBox.innerHTML = `<p style="color:red;">Erreur de l'API IA: ${res.status}.</p>`;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  } catch(e) {
Â  Â  Â  Â  Â  Â  resultBox.innerHTML = `<p style="color:red;">Erreur de connexion au service IA: ${e.message}</p>`;
Â  Â  Â  Â  } finally {
Â  Â  Â  Â  Â  Â  btn.disabled = false;
Â  Â  Â  Â  }
Â  Â  });

Â  Â  // 2. Repurposing 
Â  Â  document.getElementById('form-repurpose').addEventListener('submit', async (e) => {
Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  const channel = document.getElementById('input-repurpose-channel').value.trim();
Â  Â  Â  Â  const resultBox = document.getElementById('repurpose-results');
Â  Â  Â  Â  const container = document.getElementById('repurpose-result-container');
Â  Â  Â  Â  const btn = document.getElementById('btn-repurpose-analyse');

Â  Â  Â  Â  if (!channel) return;

Â  Â  Â  Â  container.style.display = 'block';
Â  Â  Â  Â  resultBox.innerHTML = `<p style="color:#ffcc00;">Analyse de VOD pour ${channel} en cours... (Appel API rÃ©el)</p>`;
Â  Â  Â  Â  btn.disabled = true;

Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const res = await fetch(`${API_BASE}/critique_ia`, {
Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  headers: {'Content-Type': 'application/json'},
Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ channel: channel, type: 'repurpose' })
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  if(res.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  const data = await res.json();
Â  Â  Â  Â  Â  Â  Â  Â  resultBox.innerHTML = data.html_critique || data.error || '<p>RÃ©ponse IA reÃ§ue, mais le format est inattendu.</p>';
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  resultBox.innerHTML = `<p style="color:red;">Erreur de l'API Repurposing: ${res.status}.</p>`;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  } catch(e) {
Â  Â  Â  Â  Â  Â  resultBox.innerHTML = `<p style="color:red;">Erreur de connexion au service Repurposing: ${e.message}</p>`;
Â  Â  Â  Â  } finally {
Â  Â  Â  Â  Â  Â  btn.disabled = false;
Â  Â  Â  Â  }
Â  Â  });

Â  Â  // 3. Trend Detector 
Â  Â  document.getElementById('btn-trend-detector').addEventListener('click', async () => {
Â  Â  Â  Â  const resultBox = document.getElementById('trend-results');
Â  Â  Â  Â  const container = document.getElementById('trend-results');
Â  Â  Â  Â  const btn = document.getElementById('btn-trend-detector');

Â  Â  Â  Â  container.style.display = 'block';
Â  Â  Â  Â  resultBox.innerHTML = `<p style="color:#ffcc00;">DÃ©tection des tendances en cours... (Appel API rÃ©el)</p>`;
Â  Â  Â  Â  btn.disabled = true;

Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const res = await fetch(`${API_BASE}/critique_ia`, {
Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  headers: {'Content-Type': 'application/json'},
Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ type: 'trend' })
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  if(res.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  const data = await res.json();
Â  Â  Â  Â  Â  Â  Â  Â  resultBox.innerHTML = data.html_critique || data.error || '<p>RÃ©ponse IA reÃ§ue, mais le format est inattendu.</p>';
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  resultBox.innerHTML = `<p style="color:red;">Erreur de l'API Trend: ${res.status}.</p>`;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  } catch(e) {
Â  Â  Â  Â  Â  Â  resultBox.innerHTML = `<p style="color:red;">Erreur de connexion au service Trend: ${e.message}</p>`;
Â  Â  Â  Â  } finally {
Â  Â  Â  Â  Â  Â  btn.disabled = false;
Â  Â  Â  Â  }
Â  Â  });


Â  Â  // --- Initialisation au chargement de la page ---
Â  Â  document.addEventListener('DOMContentLoaded', function() {
Â  Â  Â  Â  initializePlayer();
Â  Â  Â  Â  const savedTab = localStorage.getItem('activeTab') || 'tab-followed';
Â  Â  Â  Â  openTab(savedTab);
Â  Â  Â  Â  checkAuth();
Â  Â  });
</script>
</body>
</html>
