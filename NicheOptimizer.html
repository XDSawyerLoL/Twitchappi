<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Streamer & Niche AI Hub V7.2 - Viral Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* --- VARIABLES CSS POUR FACILITER LA MAINTENANCE DES COULEURS --- */
        :root {
            --color-bg-dark: #0d0d0d;
            --color-bg-medium: #1a1a1a;
            --color-bg-light: #111;
            --color-primary-pink: #ff0099;
            --color-secondary-blue: #22c7ef;
            --color-ai-niche: #59d682; /* Vert */
            --color-ai-repurpose: #9933ff; /* Violet */
            --color-ai-growth: #ffcc00; /* Jaune */
            --color-text-dimmed: #9aa3a8;
            --color-border-dark: #2e2e2e;
            --color-border-medium: #333;
            --color-chat-bubble: #33aaff; /* Bleu clair */
            --color-title-suggest: #ff6600; /* Orange pour le SEO */
        }

        /* Styles Globaux */
        body {
            background-color: var(--color-bg-dark);
            color: #fff; 
            font-family: 'Inter', Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        #twitch-lucky-main {
            all: initial;
            display: block;
            max-width: 1200px;
            margin: 20px auto;
            padding: 10px;
            font-family: 'Inter', sans-serif;
            color: #fff; 
        }
        h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 28px;
            color: var(--color-primary-pink);
            margin-bottom: 5px;
            text-align: center;
        }
        .h1-blue-accent {
            color: var(--color-secondary-blue);
        }
        .subtitle-center {
            color: var(--color-text-dimmed);
            font-size: 12px;
            margin-bottom: 15px;
            text-align: center;
        }
        
        /* Styles sp√©cifiques au Lecteur */
        .player-wrapper {
            margin-bottom: 20px;
            padding: 15px;
            background: var(--color-bg-medium);
            border-radius: 12px;
            border: 1px solid var(--color-border-dark);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        .player-wrapper h2 {
            font-family: 'Orbitron', sans-serif;
            font-size: 20px;
            color: var(--color-secondary-blue);
            margin: 0 0 10px;
            display: flex;
            align-items: center;
        }
        #player-channel-status {
            font-size: 12px;
            color: var(--color-text-dimmed);
            margin-left: auto;
            font-weight: normal;
            font-family: 'Inter', sans-serif;
        }
        #twitch-embed {
            width: 100%;
            height: 550px;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(34, 199, 239, 0.3);
            overflow: hidden;
        }
        #form-channel-player {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
        }
        /* Inputs & Boutons G√©n√©riques */
        .action-input {
            width: 100%; padding: 10px; border-radius: 6px; border: 1px solid var(--color-border-medium);
            background: var(--color-bg-dark); color: #fff; font-size: 13px; 
        }
        .btn-primary {
            background: var(--color-primary-pink); color: #fff; border: 0; padding: 8px 12px; border-radius: 6px;
            cursor: pointer; font-weight: 600; text-transform: uppercase; font-size: 12px;
            box-shadow: 0 0 6px rgba(255,0,153,.4);
        }
        .btn-primary:hover:not(:disabled) { background: #E6008A; }
        .btn-secondary {
            background: var(--color-secondary-blue); color: #00161d; border: 0; padding: 8px 12px; border-radius: 6px;
            cursor: pointer; font-weight: 600; text-transform: uppercase; font-size: 12px;
            box-shadow: 0 0 6px rgba(34,199,239,.4);
        }
        .btn-secondary:hover:not(:disabled) { background: #1eafdd; }
        
        /* CONSISTENCE VISUELLE : Style de base pour tous les blocs de r√©sultats (IA, Scan, Boost) */
        .ai-result-box {
            background: #0a0a0a; border: 1px solid var(--color-border-dark); border-radius: 6px; padding: 15px; margin-top: 15px;
            color: #ffffff; 
        }
        
        /* Am√©lioration de la lisibilit√© du contenu de l'IA */
        .ai-result-box p {
            margin-bottom: 12px;
            line-height: 1.6;
            font-size: 13px;
        }
        .ai-result-box h4 {
            font-family: 'Orbitron', sans-serif;
            font-size: 16px; 
            margin-top: 20px;
            margin-bottom: 10px;
            border-bottom: 2px solid var(--color-primary-pink);
            padding-bottom: 5px;
            color: var(--color-secondary-blue);
        }
        .ai-result-box strong {
            font-weight: 700;
        }
        .ai-result-box ul, .ai-result-box ol {
            margin-left: 25px;
            margin-bottom: 15px; 
            font-size: 13px;
            line-height: 1.5;
            list-style-type: disc; 
        }
        .ai-result-box ol {
            list-style-type: decimal;
        }
        .ai-result-box li {
            margin-bottom: 8px; 
        }

        /* Couleurs d'accentuation des r√©sultats AI */
        #scan-result { border-color: var(--color-secondary-blue); }
        #niche-result-container { border-color: var(--color-ai-niche); }
        #repurpose-result-container { border-color: var(--color-ai-repurpose); }
        #trend-results { border-color: var(--color-ai-growth); }
        #title-suggest-results { border-color: var(--color-title-suggest); } /* NOUVEAU */
        #boost-results { border-color: var(--color-primary-pink); }
        #raid-results { border-color: #6441a5; }

        #niche-result-container h4 { color: var(--color-ai-niche); border-color: var(--color-ai-niche); }
        #repurpose-result-container h4 { color: var(--color-ai-repurpose); border-color: var(--color-ai-repurpose); }
        #trend-results h4 { color: var(--color-ai-growth); border-color: var(--color-ai-growth); }
        #title-suggest-results h4 { color: var(--color-title-suggest); border-color: var(--color-title-suggest); } /* NOUVEAU */
        
        #niche-result-container strong { color: var(--color-ai-niche); }
        #repurpose-result-container strong { color: var(--color-ai-repurpose); }
        #trend-results strong { color: var(--color-ai-growth); }
        #title-suggest-results strong { color: var(--color-title-suggest); } /* NOUVEAU */

        /* Styles d'onglets et de connexion */
        .tab-btn {
            font-family: 'Orbitron', sans-serif;
            padding: 12px 15px;
            background: var(--color-bg-light);
            border: 1px solid var(--color-border-medium);
            border-bottom: none;
            color: var(--color-text-dimmed);
            cursor: pointer;
            border-radius: 8px 8px 0 0;
            transition: all 0.2s;
            flex: 1;
            text-align: center;
            font-size: 12px;
            white-space: nowrap;
        }
        .tab-btn.active {
            background: var(--color-bg-medium);
            color: #fff;
            border-top: 3px solid var(--color-primary-pink);
            font-weight: bold;
        }
        /* Couleurs sp√©cifiques pour les onglets */
        .tab-btn.niche-scan.active { border-top: 3px solid var(--color-secondary-blue); color: var(--color-secondary-blue); }
        .tab-btn.ai-tools.active { border-top: 3px solid var(--color-ai-repurpose); color: var(--color-ai-repurpose); }
        .tab-btn.boost-raid.active { border-top: 3px solid var(--color-primary-pink); color: var(--color-primary-pink); }
        .tab-btn.account-points.active { border-top: 3px solid var(--color-ai-growth); color: var(--color-ai-growth); } /* NOUVEAU */

        .tab-content {
            display: none;
            background: var(--color-bg-medium);
            border: 1px solid var(--color-border-dark);
            border-top: none;
            border-radius: 0 0 10px 10px;
            padding: 20px;
        }
        .tab-content.active {
            display: block;
        }
        .tab-heading {
             font-family:'Orbitron',sans-serif; 
             margin-bottom:15px; 
             font-size:16px;
        }
        .login-box {
            padding:15px; 
            background:var(--color-bg-light); 
            border-radius:8px; 
            margin-bottom:20px; 
            border: 1px solid #444;
        }

        /* Styles de carte du fil suivi (inchang√©s) */
        #followed-streams-list {
            display: flex; flex-wrap: wrap; gap: 15px; padding: 0; margin: 0;
        }
        .followed-stream-item {
            display: flex; flex-direction: column; width: calc(33.333% - 10px); min-width: 180px; padding: 10px;
            background: var(--color-bg-light); border-radius: 8px; border: 1px solid var(--color-border-dark);
            cursor: pointer; transition: all 0.2s; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        .followed-stream-item:hover {
            background: #280517; border-color: var(--color-primary-pink); transform: translateY(-2px);
        }
        .streamer-avatar {
            width: 100%; aspect-ratio: 16 / 9; border-radius: 4px; border: 1px solid var(--color-primary-pink); 
            object-fit: cover; flex-shrink: 0;
        }
        /* Responsive */
        @media (max-width: 768px) {
            .followed-stream-item {
                width: 100%; 
                min-width: unset;
            }
            #twitch-embed { height: 350px; } 
        }

        /* --- STYLES CHAT IA FLOTTANT (Inchag√©s) --- */
        #ai-chat-bubble {
            position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px;
            background: var(--color-chat-bubble); border-radius: 50%; display: flex;
            align-items: center; justify-content: center; cursor: pointer;
            box-shadow: 0 4px 15px rgba(51, 170, 255, 0.6); z-index: 1000; 
            transition: transform 0.2s, background 0.2s; font-size: 30px;
            font-family: 'Orbitron', sans-serif; border: 2px solid white;
        }

        #ai-chat-bubble:hover { transform: scale(1.1); background: #1e87e6; }
        
        #ai-chat-panel {
            position: fixed; bottom: 100px; right: 30px; width: 350px; height: 450px; 
            background: var(--color-bg-medium); border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5); z-index: 999; padding: 15px;
            border: 2px solid var(--color-chat-bubble); display: flex;
            flex-direction: column; transform: translateX(120%);
            transition: transform 0.4s ease-out;
        }

        #ai-chat-panel.open { transform: translateX(0); }
        
        #chat-window {
            flex-grow: 1; overflow-y: auto; padding: 10px; background: var(--color-bg-dark);
            border-radius: 6px; margin-bottom: 10px; border: 1px solid var(--color-border-medium);
            scroll-behavior: smooth;
        }
        
        .chat-message {
            margin-bottom: 10px; line-height: 1.4; padding: 8px 12px; border-radius: 15px;
            max-width: 85%; font-size: 13px; color: #fff;
        }
        .user-message {
            background: var(--color-primary-pink); margin-left: auto; border-bottom-right-radius: 2px;
            text-align: right;
        }
        .ai-message {
            background: var(--color-chat-bubble); margin-right: auto; border-bottom-left-radius: 2px;
        }
        .ai-message a { color: yellow; text-decoration: underline; }
        
        #btn-send-chat {
            background: var(--color-chat-bubble); color: var(--color-bg-dark);
            font-weight: 700; padding: 10px 12px; border-radius: 6px;
        }

    </style>
</head>
<body>

<div id="twitch-lucky-main">
    <h1 class="text-3xl"><span class="h1-blue-accent">STREAMER</span> HUB V7.2</h1>
    <div class="subtitle-center">L'outil viral pour votre croissance. Niche ‚Ä¢ IA ‚Ä¢ Streampoints.</div>

    <div class="player-wrapper">
        <h2>
            <span style="margin-right:6px;" id="player-icon">üé¨</span> LECTEUR & CHAT
            <span id="player-channel-status"></span>
        </h2> 
        <form id="form-channel-player">
            <input id="input-channel" type="text" placeholder="Nom de la cha√Æne Twitch (ex: gotaga)" title="Nom de la cha√Æne Twitch √† regarder" class="action-input">
            <button type="submit" id="btn-player-launch" class="btn-primary min-w-[80px]">‚ñ∂Ô∏è LANCER</button>
        </form>
        <div id="twitch-embed"></div>
    </div>

    <div id="tabs-container">
        <div class="flex flex-wrap flex-tabs">
            <button class="tab-btn" data-tab-id="tab-followed" onclick="openTab('tab-followed')">üî¥ MON FIL LIVE</button> 
            <button class="tab-btn niche-scan" data-tab-id="tab-scan-niche" onclick="openTab('tab-scan-niche')">üéØ SCAN & ANALYSE V/S</button>
            <button class="tab-btn ai-tools" data-tab-id="tab-ai-tools" onclick="openTab('tab-ai-tools')">üõ†Ô∏è OUTILS IA</button>
            <button class="tab-btn boost-raid" data-tab-id="tab-boost-raid" onclick="openTab('tab-boost-raid')">‚ö° BOOST & RAID</button>
            <button class="tab-btn account-points" data-tab-id="tab-account" onclick="openTab('tab-account')">üí∞ MON COMPTE</button>
        </div>

        <div id="tab-account" class="tab-content">
            <h3 class="tab-heading" style="color:var(--color-ai-growth);">
                <span class="icon">üë§</span> Statut Utilisateur & Streampoints
            </h3>

            <div class="login-box" style="border-color:var(--color-ai-growth);">
                <h4 class="font-bold text-sm mb-2" style="color:var(--color-secondary-blue);">Connexion Twitch</h4>
                <p id="login-status" class="text-yellow text-xs mb-4">Statut: V√©rification...</p>
                <button id="btn-twitch-login" class="btn-primary" style="background:#6441a5; width:100%; padding: 12px;">
                    üîí SE CONNECTER VIA TWITCH
                </button>
            </div>
            
            <div class="login-box" style="border-color:var(--color-ai-growth); margin-top: 20px;">
                <h4 class="font-bold text-sm mb-2" style="color:var(--color-ai-growth);">Votre Solde Streampoints</h4>
                <p id="streampoints-status" class="text-3xl font-extrabold" style="color:var(--color-ai-growth);">
                    Chargement...
                </p>
                <p class="text-xs mt-2" style="color:var(--color-text-dimmed);">
                    Gagnez des points en utilisant nos outils. D√©pensez-les pour des fonctionnalit√©s premium ou chez nos partenaires.
                </p>
                
                <h5 class="font-bold text-sm mt-4 mb-2" style="color:var(--color-primary-pink);">Exemple d'Action √† D√©penser (20 Points)</h5>
                <p class="text-xs mb-2" style="color:var(--color-text-dimmed);">Simule un petit boost de visibilit√© payant (d√©monstration).</p>
                <button id="btn-spend-points" class="btn-primary" disabled>
                    D√âPENSER 20 STREAMPPOINTS
                </button>
            </div>
        </div>
        
        <div id="tab-followed" class="tab-content">
            <h3 class="tab-heading text-pink">
                <span class="icon">üîë</span> Mon Fil Suivi
            </h3>
            
            <div class="mt-6 pt-5 border-t border-gray-700" style="border-color: var(--color-border-medium);">
                <h4 class="tab-heading text-pink">
                    <span class="icon">üî¥</span> Vos Cha√Ænes Suivies LIVE
                </h4>
                <div id="followed-streams-list">
                    <p style="color:#555; text-align:center; padding:10px;">Chargement du fil...</p>
                </div>
            </div>
        </div>

        <div id="tab-scan-niche" class="tab-content">
            <h3 class="tab-heading" style="color:var(--color-secondary-blue);">
                <span class="icon">üî≠</span> Scan de Cible (Jeu ou Streamer)
            </h3>
            <form id="form-target" class="flex gap-2 mb-2">
                <input id="input-target" type="text" placeholder="Jeu ou Pseudo" class="action-input">
                <button type="submit" id="btn-target" class="btn-secondary min-w-[80px]">üéØ CIBLER</button>
            </form>
            <div id="scan-result" class="ai-result-box">
                <p style="text-align:center; color:var(--color-text-dimmed); font-weight: bold;">
                    Entrez un jeu ou un pseudo et cliquez sur CIBLER. Le Ratio V/S (Viewers/Streamer) est affich√© pour les jeux.
                </p>
            </div>
            
            <h3 class="tab-heading mt-8" style="color:var(--color-ai-niche);">
                <span class="icon">üìà</span> Critiques de Niche & D√©tection de Trend IA
            </h3>
            
            <form id="form-niche-analysis" class="flex gap-2 mb-2 mt-4">
                <input id="input-niche-game" type="text" placeholder="Jeu √† Analyser (ex: Starfield)" class="action-input">
                <button type="submit" id="btn-niche-analyse" class="btn-secondary min-w-[100px]" style="background:var(--color-ai-niche); color: var(--color-bg-dark);">
                    ‚ú® CRITIQUE IA
                </button>
            </form>
            <div id="niche-result-container" class="ai-result-box" style="border-color: var(--color-ai-niche);">
                <div id="niche-results">
                    <p style="text-align:center; color:var(--color-text-dimmed); font-weight: bold;">
                        Analyse la saturation et propose des sous-niches sp√©cifiques.
                    </p>
                </div>
            </div>

            <h4 class="font-bold text-sm mt-6 mb-2" style="color:var(--color-ai-growth);">D√©tection de Trend V/S (Ratio Spectateurs/Streamer)</h4>
            <p class="text-sm mb-4" style="color:var(--color-text-dimmed);">
                Trouvez les jeux avec le meilleur potentiel de croissance pour les petits streamers.
            </p>
            <button id="btn-trend-detector" class="btn-primary" style="background:var(--color-ai-growth); color:var(--color-bg-dark); width:100%; padding:12px;">
                üîÆ D√âTECTER LA PROCHAINE NICHE CHAUDE
            </button>
            <div id="trend-results" class="ai-result-box" style="border-color: var(--color-ai-growth); margin-top: 15px;">
                <p style="text-align:center; color:var(--color-text-dimmed); font-weight: bold;">
                    Analyse des tendances V/S en cours.
                </p>
            </div>
        </div>

        <div id="tab-ai-tools" class="tab-content">
            <h3 class="tab-heading" style="color:var(--color-ai-repurpose);">
                <span class="icon">‚úÇÔ∏è</span> Repurposing Contenu IA (VOD vers Shorts/TikTok)
            </h3>
            <form id="form-repurpose" class="flex gap-2 mb-2">
                <input id="input-repurpose-channel" type="text" placeholder="Pseudo du Streamer pour VOD" class="action-input">
                <button type="submit" id="btn-repurpose-analyse" class="btn-secondary min-w-[100px]" style="background:var(--color-ai-repurpose);">
                    üöÄ ANALYSER VOD
                </button>
            </form>
            <div id="repurpose-result-container" class="ai-result-box" style="border-color: var(--color-ai-repurpose);">
                <div id="repurpose-results">
                    <p style="text-align:center; color:var(--color-text-dimmed); font-weight: bold;">
                        L'IA g√©n√®re des id√©es de clips/shorts bas√©es sur le style du streamer.
                    </p>
                </div>
            </div>

            <h3 class="tab-heading mt-8" style="color:var(--color-title-suggest);">
                <span class="icon">üìù</span> Suggestion de Titre & Tag IA (SEO)
            </h3>
            <form id="form-title-suggest">
                <input id="input-title-game" type="text" placeholder="Jeu (ex: Baldur's Gate 3)" class="action-input mb-2">
                <input id="input-title-angle" type="text" placeholder="Angle du Stream (ex: D√©fi No Hit / Lore d√©taill√©e / Fun)" class="action-input mb-2">
                <button type="submit" id="btn-title-suggest" class="btn-primary" style="background:var(--color-title-suggest); width:100%; padding: 12px;">
                    ‚ú® G√âN√âRER TITRES & TAGS SEO
                </button>
            </form>

            <div id="title-suggest-results" class="ai-result-box" style="border-color: var(--color-title-suggest);">
                <p style="text-align:center; color:var(--color-text-dimmed); font-weight: bold;">
                    L'IA g√©n√®re 3 titres clickbait/SEO et 10 tags Twitch optimis√©s.
                </p>
            </div>
        </div>

        <div id="tab-boost-raid" class="tab-content">
            <h3 class="tab-heading text-pink">
                <span class="icon">‚¨ÜÔ∏è</span> STREAM BOOST & RAID
            </h3>
            <div class="login-box mb-6">
                <h4 class="text-pink font-bold text-sm mb-2" style="color:var(--color-primary-pink);">‚ö° Boost de Visibilit√© (Cooldown 3h)</h4>
                <form id="form-boost" class="flex gap-2">
                    <input id="input-boost" type="text" placeholder="Cha√Æne √† promouvoir" class="action-input">
                    <button type="submit" id="btn-boost" class="btn-primary min-w-[100px]">üì§ BOOST</button>
                </form>
                <div id="boost-results" class="ai-result-box" style="border-color: var(--color-primary-pink); margin-top: 15px;">
                    <p style="text-align:center; color: var(--color-text-dimmed);">
                        Entrez le nom de la cha√Æne et cliquez sur BOOST.
                    </p>
                </div>
            </div>
            
            <div class="login-box" style="border-color:#6441a5;">
                <h4 class="text-pink font-bold text-sm mb-2" style="color:#6441a5;">‚öîÔ∏è Raid Rapide (N√©cessite le Scope 'channel:manage:raids')</h4>
                <form id="form-raid" class="flex gap-2">
                    <input id="input-raid-target" type="text" placeholder="Cha√Æne cible du Raid (ex: gotaga)" class="action-input">
                    <button type="submit" id="btn-raid" class="btn-primary min-w-[100px]" style="background:#6441a5;">‚öîÔ∏è RAID</button>
                </form>
                <div id="raid-results" class="ai-result-box" style="border-color: #6441a5; margin-top: 15px;">
                    <p style="text-align:center; color: var(--color-text-dimmed);">
                        Connectez-vous avec le scope 'channel:manage:raids' pour initier un Raid.
                    </p>
                </div>
            </div>
        </div>

    </div>

    <div id="social-share-container" class="mt-8 pt-4 border-t border-gray-700 max-w-lg mx-auto" style="border-color:var(--color-border-medium);">
        <h4 class="text-white text-lg mb-3 font-semibold border-l-2 border-l-primary-pink pl-2">‚≠ê Aidez-nous √† grandir, Partagez !</h4>
        <div class="flex space-x-4">
            <button onclick="sharePage('twitter')" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded transition duration-300 flex items-center text-sm">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22 4.01c-.72.32-1.5.54-2.32.64.83-.5 1.47-1.3 1.77-2.26-.78.46-1.64.8-2.56.98-.74-.78-1.78-1.27-2.94-1.27-2.22 0-4.02 1.8-4.02 4.02 0 .32.03.63.1.93-3.34-.17-6.3-1.77-8.28-4.2-.35.6-.55 1.29-.55 2.03 0 1.4.7 2.65 1.77 3.38-.65-.02-1.26-.2-1.79-.5v.05c0 1.95 1.38 3.58 3.22 3.95-.33.1-.68.16-1.04.16-.26 0-.52-.02-.77-.07.51 1.6 2 2.77 3.77 2.8-.23.18-2.6.5-4.4.24C3.25 20.08 6 21 9 21c7.2 0 11.1-5.96 11.1-11.1s-.1-2.02-.3-3.04c.76-.55 1.43-1.23 1.96-2.01z"></path></svg>
                Partager sur X
            </button>
            <button onclick="sharePage('facebook')" class="bg-blue-700 hover:bg-blue-800 text-white font-bold py-2 px-4 rounded transition duration-300 flex items-center text-sm">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18.77 2H5.23A3.23 3.23 0 0 0 2 5.23v13.54A3.23 3.23 0 0 0 5.23 22h6.88v-8.03h-2.73v-3.41h2.73V7.93c0-2.7 1.6-4.17 4.05-4.17.82 0 1.5.06 1.71.09v3.13h-1.85c-1.47 0-1.76.7-1.76 1.73v2.27h3.69l-.6 3.41h-3.09V22h5.3A3.23 3.23 0 0 0 22 18.77V5.23A3.23 3.23 0 0 0 18.77 2z"></path></svg>
                Partager sur Facebook
            </button>
        </div>
    </div>
</div>

<div id="ai-chat-bubble">
    üí¨
</div>

<div id="ai-chat-panel">
    <div id="chat-header">
        ASSISTANT CHAT IA
        <span id="ai-chat-close" style="cursor: pointer; font-size: 24px;">&times;</span>
    </div>

    <div id="chat-window">
        <div class="chat-message ai-message">
            Bonjour ! Je suis Streamer AI. Comment puis-je vous aider √† d√©velopper votre cha√Æne ou trouver la meilleure strat√©gie de contenu ? Posez-moi une question !
        </div>
    </div>
    
    <form id="form-chat-input">
        <input id="chat-input" type="text" placeholder="Demandez conseil √† l'IA..." required>
        <button type="submit" id="btn-send-chat" class="min-w-[50px] font-bold">‚ñ∂Ô∏è</button>
    </form>
</div>

<script src="https://embed.twitch.tv/embed/v1.js"></script>
<script>
    // --- Configuration Globale ---
    const API_BASE = window.location.origin;
    const DEFAULT_CHANNEL = 'twitch'; 
    
    let twitchUserConnected = false; 
    let currentStreampoints = 0; // Ajout du solde de points

    // --- Gestion des Onglets ---
    function openTab(tabId) {
        localStorage.setItem('activeTab', tabId);
        document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
        
        const targetTab = document.getElementById(tabId);
        if (targetTab) {
            targetTab.classList.add('active');
            const targetBtn = document.querySelector(`.tab-btn[data-tab-id="${tabId}"]`);
            if (targetBtn) targetBtn.classList.add('active');
        }
    }

    // --- Lecteur Twitch (Fonctions inchang√©es) ---
    let embed = null;
    const twitchEmbedContainer = document.getElementById('twitch-embed');
    const inputChannel = document.getElementById('input-channel');

    function launchPlayer(channelName) {
        if (!channelName) return;

        localStorage.setItem('activeChannel', channelName);
        inputChannel.value = channelName;

        twitchEmbedContainer.innerHTML = '';
        embed = new Twitch.Embed("twitch-embed", {
            width: "100%",
            height: 550,
            channel: channelName,
            layout: "video-and-chat", 
            autoplay: true,
            parent: [window.location.hostname] 
        });
        document.getElementById('player-channel-status').textContent = `Cha√Æne: ${channelName.toUpperCase()}`;
    }

    function initializePlayer() {
        const storedChannel = localStorage.getItem('activeChannel');
        const channelToLoad = storedChannel || DEFAULT_CHANNEL;
        launchPlayer(channelToLoad);
    }
    
    document.getElementById('form-channel-player').addEventListener('submit', (e) => {
        e.preventDefault();
        const channel = inputChannel.value.trim().toLowerCase();
        if(channel) {
            launchPlayer(channel);
        }
    });

    // --- Authentification Twitch, Fil Suivi et Streampoints (Mise √† jour) ---
    const btnLogin = document.getElementById('btn-twitch-login');
    const loginStatus = document.getElementById('login-status');
    const followedStreamsList = document.getElementById('followed-streams-list');
    const streampointsStatus = document.getElementById('streampoints-status');
    const btnSpendPoints = document.getElementById('btn-spend-points');

    async function checkAuth() {
        try {
            const res = await fetch(`${API_BASE}/twitch_user_status`);
            if(res.ok) {
                const data = await res.json();
                if(data.is_connected) {
                    twitchUserConnected = true;
                    loginStatus.innerHTML = `‚úÖ Connect√© en tant que <strong style="color:var(--color-secondary-blue)">${data.username}</strong>`;
                    btnLogin.textContent = "üîí D√âCONNEXION";
                    btnLogin.style.background = "#e34a64"; 
                    loadFollowedStreams(); 
                    loadStreampoints(); // NOUVEAU
                } else {
                    twitchUserConnected = false;
                    loginStatus.textContent = "Statut: D√©connect√©.";
                    btnLogin.textContent = "üîí SE CONNECTER VIA TWITCH";
                    btnLogin.style.background = "#6441a5"; 
                    followedStreamsList.innerHTML = '<p style="color:var(--color-ai-growth); text-align:center;">Veuillez vous connecter pour voir ceci.</p>';
                    streampointsStatus.textContent = "Non connect√©";
                    btnSpendPoints.disabled = true;
                }
            } else {
                twitchUserConnected = false;
                loginStatus.innerHTML = `‚ùå Erreur API (${res.status}). Veuillez v√©rifier le serveur backend.`;
                followedStreamsList.innerHTML = '<p style="color:red; text-align:center;">Erreur de connexion au service Twitch.</p>';
            }
        } catch(e) {
            console.error("Erreur check auth:", e);
            twitchUserConnected = false;
            loginStatus.innerHTML = `‚ùå Erreur technique: ${e.message}.`;
            followedStreamsList.innerHTML = `<p style="color:red; text-align:center;">Erreur API: ${e.message}</p>`;
        }
    }
    
    async function loadStreampoints() {
         if(!twitchUserConnected) return;

         try {
            const res = await fetch(`${API_BASE}/user_streampoints`);
            const data = await res.json();

            if (data.is_connected) {
                currentStreampoints = data.points;
                streampointsStatus.innerHTML = `${data.points.toLocaleString('fr-FR')} <span class="text-base" style="color:var(--color-text-dimmed);">Points</span>`;
                btnSpendPoints.disabled = data.points < 20;
            } else {
                streampointsStatus.textContent = "Non connect√©";
                btnSpendPoints.disabled = true;
            }
         } catch(e) {
             streampointsStatus.textContent = "Erreur !";
             console.error("Erreur Streampoints:", e);
             btnSpendPoints.disabled = true;
         }
    }
    
    // Logique de D√©pense de Points (NOUVEAU)
    btnSpendPoints.addEventListener('click', async () => {
        if (!twitchUserConnected || currentStreampoints < 20) return;

        btnSpendPoints.disabled = true;
        btnSpendPoints.textContent = "D√©pense en cours...";
        
        try {
            const res = await fetch(`${API_BASE}/spend_streampoints`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ cost: 20, action: 'Boost Visibilit√© D√©marrage' }) 
            });
            
            const data = await res.json();

            if(res.ok && data.success) {
                currentStreampoints = data.new_points;
                streampointsStatus.innerHTML = `${data.new_points.toLocaleString('fr-FR')} <span class="text-base" style="color:var(--color-text-dimmed);">Points</span>`;
                alert(`Succ√®s! ${data.message}`);
            } else {
                alert(`Erreur de d√©pense: ${data.error || "Probl√®me serveur"}`);
            }

        } catch(e) {
            alert(`Erreur technique de d√©pense: ${e.message}`);
        } finally {
            btnSpendPoints.textContent = "D√âPENSER 20 STREAMPPOINTS";
            btnSpendPoints.disabled = currentStreampoints < 20;
        }
    });


    btnLogin.addEventListener('click', () => {
        if(twitchUserConnected) {
            fetch(`${API_BASE}/twitch_logout`, { method: 'POST' }).finally(() => {
                window.location.reload(); 
            });
        } else {
            window.location.href = `${API_BASE}/twitch_auth_start`;
        }
    });

    async function loadFollowedStreams() {
         if(!twitchUserConnected) {
            followedStreamsList.innerHTML = '<p style="color:var(--color-ai-growth); text-align:center;">Veuillez vous connecter pour voir ceci.</p>';
            return;
        }
        
        followedStreamsList.innerHTML = '<p style="text-align:center; color:#555;">Chargement des streams en direct...</p>';
        
        try {
            const res = await fetch(`${API_BASE}/followed_streams`);
            
            if(res.ok) {
                const data = await res.json();
                
                if (data.data && data.data.length > 0) {
                    followedStreamsList.innerHTML = ''; 
                    data.data.forEach(stream => {
                        const div = document.createElement('div');
                        div.className = 'followed-stream-item';
                        
                        const imageUrl = stream.thumbnail_url 
                                        ? stream.thumbnail_url.replace('{width}', '320').replace('{height}', '180') 
                                        : stream.profile_image_url || 'https://static-cdn.jtvnw.net/jtv_user_pictures/default_profile.png'; 

                        div.innerHTML = `
                            <img src="${imageUrl}" alt="Preview de ${stream.user_name}" class="streamer-avatar">
                            <div class="stream-details">
                                <span class="stream-name" title="${stream.user_name}">${stream.user_name}</span>
                                <div class="stream-meta">
                                    <span class="stream-viewers">üî¥ ${stream.viewer_count} spectateurs</span>
                                    <span class="stream-game" title="${stream.game_name}">${stream.game_name}</span>
                                </div>
                            </div>
                        `;

                        div.onclick = () => {
                            launchPlayer(stream.user_name);
                        };
                        followedStreamsList.appendChild(div);
                    });
                } else {
                    followedStreamsList.innerHTML = '<p style="text-align:center;">Aucun stream en direct parmi vos cha√Ænes suivies.</p>';
                }
            } else {
                followedStreamsList.innerHTML = `<p style="color:red; text-align:center;">Erreur chargement du fil (Statut: ${res.status}).</p>`;
            }
        } catch(e) {
            followedStreamsList.innerHTML = `<p style="color:red; text-align:center;">Erreur API: ${e.message}</p>`;
        }
    }


    // --- Logique de Scan Cible (Mise √† jour pour Ratio V/S) ---
    document.getElementById('form-target').addEventListener('submit', async (e) => {
        e.preventDefault();
        const target = document.getElementById('input-target').value.trim();
        const resultBox = document.getElementById('scan-result'); 
        const btn = document.getElementById('btn-target');

        if (!target) {
            resultBox.innerHTML = '<p style="text-align:center; color:var(--color-text-dimmed); font-weight: bold;">Veuillez entrer un Jeu ou un Pseudo pour lancer le scan.</p>';
            return;
        }

        resultBox.innerHTML = `<p style="text-align:center; color:var(--color-secondary-blue);">üöÄ Scan de la cible en cours pour <strong>${target}</strong>... (Appel API r√©el)</p>`;
        btn.disabled = true;

        try {
            const res = await fetch(`${API_BASE}/scan_target`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ query: target }) 
            });

            if(res.ok) {
                const data = await res.json();
                
                let htmlOutput = '';

                if (data.type === 'game' && data.game_data) {
                    const g = data.game_data;
                    htmlOutput += `<h4 style="color:var(--color-secondary-blue); border-color:var(--color-secondary-blue);">Analyse de Jeu: ${g.name}</h4>`;
                    htmlOutput += `<div class="flex items-start gap-4 mb-4">
                                        <img src="${g.box_art_url}" alt="Box Art" style="width: 80px; border-radius: 4px; border: 1px solid var(--color-secondary-blue);">
                                        <div class="text-sm">
                                            <p><strong>Total Streamers LIVE:</strong> ${g.total_streamers}</p>
                                            <p><strong>Total Spectateurs LIVE:</strong> ${g.total_viewers.toLocaleString('fr-FR')}</p>
                                            <p><strong>Ratio V/S (Spectateurs par Streamer):</strong> <strong style="color:var(--color-ai-niche); font-size: 1.1em;">${g.avg_viewers_per_streamer}</strong></p>
                                        </div>
                                    </div>`;
                    htmlOutput += `<h5>Top 10 Streams:</h5><ul>`;
                    g.streams.forEach(s => {
                        htmlOutput += `<li><strong>${s.user_name}</strong> - ${s.viewer_count} spectateurs (${s.title.substring(0, 50)}...)</li>`;
                    });
                    htmlOutput += `</ul>`;
                } else if (data.type === 'user' && data.user_data) {
                    const u = data.user_data;
                    htmlOutput += `<h4 style="color:var(--color-primary-pink); border-color:var(--color-primary-pink);">Analyse de Streamer: ${u.display_name}</h4>`;
                    htmlOutput += `<div class="flex items-start gap-4 mb-4">
                                        <img src="${u.profile_image_url}" alt="Avatar" style="width: 80px; border-radius: 50%; border: 2px solid var(--color-primary-pink);">
                                        <div class="text-sm">
                                            <p><strong>Statut:</strong> <span style="color:${u.is_live ? 'var(--color-primary-pink)' : 'var(--color-text-dimmed)'};">${u.is_live ? 'üî¥ EN DIRECT' : 'OFFLINE'}</span></p>
                                            <p><strong>Description:</strong> ${u.description || 'N/A'}</p>
                                            ${u.is_live && u.stream_details ? `<p><strong>Jeu Actuel:</strong> ${u.stream_details.game_name}</p><p><strong>Spectateurs:</strong> ${u.stream_details.viewer_count.toLocaleString('fr-FR')}</p>` : ''}
                                        </div>
                                    </div>`;
                    htmlOutput += `<button onclick="launchPlayer('${u.login}')" class="btn-primary" style="width:100%;">Voir le Stream</button>`;
                } else {
                    htmlOutput = `<p style="color:var(--color-text-dimmed); text-align:center;">${data.message || 'Aucun r√©sultat trouv√©.'}</p>`;
                }

                resultBox.innerHTML = htmlOutput;
                
            } else {
                let errorMsg = `Erreur lors de l'appel au service de Scan (Statut: ${res.status}).`;
                const data = await res.json();
                errorMsg = data.error || errorMsg;
                resultBox.innerHTML = `<p style="color:#e34a64; text-align:center; font-weight: bold;">‚ùå ${errorMsg}</p>`;
            }
        } catch(e) {
            resultBox.innerHTML = `<p style="color:#e34a64; text-align:center;">Erreur de connexion au service de Scan: ${e.message}</p>`;
        } finally {
            btn.disabled = false;
        }
    });


    // --- Logique d'interaction IA (Critique Niche, Repurposing, Trend Detector - Inchang√©) ---
    
    // 1. Analyse de Niche 
    document.getElementById('form-niche-analysis').addEventListener('submit', async (e) => {
        e.preventDefault();
        const game = document.getElementById('input-niche-game').value.trim();
        const resultBox = document.getElementById('niche-results');
        const btn = document.getElementById('btn-niche-analyse');

        if (!game) return;

        resultBox.innerHTML = `<p style="color:var(--color-ai-niche);">Analyse IA de niche en cours pour <strong>${game}</strong>...</p>`;
        btn.disabled = true;

        try {
            const res = await fetch(`${API_BASE}/critique_ia`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ query: game, type: 'niche' }) 
            });

            if(res.ok) {
                const data = await res.json();
                resultBox.innerHTML = data.html_critique || data.error || '<p>R√©ponse IA re√ßue, mais le format est inattendu.</p>';
            } else {
                const data = await res.json();
                resultBox.innerHTML = `<p style="color:#e34a64;">Erreur de l'API IA: ${res.status}. ${data.error || ''}</p>`;
            }
        } catch(e) {
            resultBox.innerHTML = `<p style="color:#e34a64;">Erreur de connexion au service IA: ${e.message}</p>`;
        } finally {
            btn.disabled = false;
        }
    });

    // 2. Repurposing 
    document.getElementById('form-repurpose').addEventListener('submit', async (e) => {
        e.preventDefault();
        const channel = document.getElementById('input-repurpose-channel').value.trim();
        const resultBox = document.getElementById('repurpose-results');
        const btn = document.getElementById('btn-repurpose-analyse');

        if (!channel) return;

        resultBox.innerHTML = `<p style="color:var(--color-ai-repurpose);">Analyse de VOD pour <strong>${channel}</strong> en cours... ü§ñ</p>`;
        btn.disabled = true;

        try {
            const res = await fetch(`${API_BASE}/critique_ia`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ query: channel, type: 'repurpose' }) 
            });

            if(res.ok) {
                const data = await res.json();
                resultBox.innerHTML = data.html_critique || data.error || '<p>R√©ponse IA re√ßue, mais le format est inattendu.</p>';
            } else {
                const data = await res.json();
                resultBox.innerHTML = `<p style="color:#e34a64;">Erreur de l'API Repurposing: ${res.status}. ${data.error || ''}</p>`;
            }
        } catch(e) {
            resultBox.innerHTML = `<p style="color:#e34a64;">Erreur de connexion au service Repurposing: ${e.message}</p>`;
        } finally {
            btn.disabled = false;
        }
    });

    // 3. Trend Detector 
    document.getElementById('btn-trend-detector').addEventListener('click', async () => {
        const resultBox = document.getElementById('trend-results');
        const btn = document.getElementById('btn-trend-detector');

        resultBox.innerHTML = `<p style="color:var(--color-ai-growth);">D√©tection des tendances en cours... üí∞</p>`;
        btn.disabled = true;

        try {
            const res = await fetch(`${API_BASE}/critique_ia`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ type: 'trend' })
            });

            if(res.ok) {
                const data = await res.json();
                resultBox.innerHTML = data.html_critique || data.error || '<p>R√©ponse IA re√ßue, mais le format est inattendu.</p>';
            } else {
                const data = await res.json();
                resultBox.innerHTML = `<p style="color:#e34a64;">Erreur de l'API Trend: ${res.status}. ${data.error || ''}</p>`;
            }
        } catch(e) {
            resultBox.innerHTML = `<p style="color:#e34a64;">Erreur de connexion au service Trend: ${e.message}</p>`;
        } finally {
            btn.disabled = false;
        }
    });
    
    // 4. Suggestion de Titre & Tag IA (NOUVEAU)
    document.getElementById('form-title-suggest').addEventListener('submit', async (e) => {
        e.preventDefault();
        const game = document.getElementById('input-title-game').value.trim();
        const angle = document.getElementById('input-title-angle').value.trim();
        const resultBox = document.getElementById('title-suggest-results');
        const btn = document.getElementById('btn-title-suggest');

        if (!game || !angle) {
            resultBox.innerHTML = '<p style="color:#e34a64; font-weight:bold;">Veuillez remplir le jeu ET l\'angle du stream.</p>';
            return;
        }

        resultBox.innerHTML = `<p style="color:var(--color-title-suggest);">G√©n√©ration de titres et tags SEO pour <strong>${game} (${angle})</strong>...</p>`;
        btn.disabled = true;

        try {
            const res = await fetch(`${API_BASE}/ai_title_suggest`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ game, angle }) 
            });

            if(res.ok) {
                const data = await res.json();
                resultBox.innerHTML = data.html_suggestion || data.error || '<p>R√©ponse IA re√ßue, mais le format est inattendu.</p>';
            } else {
                const data = await res.json();
                resultBox.innerHTML = `<p style="color:#e34a64;">Erreur de l'API Titre: ${res.status}. ${data.error || ''}</p>`;
            }
        } catch(e) {
            resultBox.innerHTML = `<p style="color:#e34a64;">Erreur de connexion au service Titre IA: ${e.message}</p>`;
        } finally {
            btn.disabled = false;
        }
    });


    // --- Logique STREAM BOOST et RAID (Inchag√©e) ---
    document.getElementById('form-boost').addEventListener('submit', async (e) => {
        e.preventDefault();
        const channel = document.getElementById('input-boost').value.trim();
        const resultBox = document.getElementById('boost-results'); 
        const btn = document.getElementById('btn-boost');

        if (!channel) return;
        
        resultBox.innerHTML = `<p style="color:var(--color-primary-pink); text-align:center;">üì§ Envoi du boost pour <strong>${channel}</strong>...</p>`;
        btn.disabled = true;

        try {
            const res = await fetch(`${API_BASE}/stream_boost`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ channel: channel })
            });

            const data = await res.json();

            if (res.ok) {
                resultBox.innerHTML = data.html_response;
                launchPlayer(channel); 
            } else if (res.status === 429) {
                resultBox.innerHTML = data.html_response || `<p style="color:#e34a64; font-weight:bold; text-align:center;">‚ùå Cooldown actif. R√©essayez plus tard.</p>`;
            } else {
                resultBox.innerHTML = `<p style="color:#e34a64; font-weight:bold; text-align:center;">Erreur API (${res.status}): ${data.error || "Une erreur inconnue s'est produite."}</p>`;
            }
        } catch(e) {
            resultBox.innerHTML = `<p style="color:#e34a64; font-weight:bold; text-align:center;">Erreur de connexion au serveur: ${e.message}</p>`;
        } finally {
            btn.disabled = false;
        }
    });
    
    document.getElementById('form-raid').addEventListener('submit', async (e) => {
        e.preventDefault();
        const targetChannelLogin = document.getElementById('input-raid-target').value.trim();
        const resultBox = document.getElementById('raid-results'); 
        const btn = document.getElementById('btn-raid');

        if (!targetChannelLogin) return;
        
        resultBox.innerHTML = `<p style="color:#6441a5; text-align:center;">‚öîÔ∏è Pr√©paration du Raid vers <strong>${targetChannelLogin}</strong>...</p>`;
        btn.disabled = true;

        try {
            const res = await fetch(`${API_BASE}/start_raid`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ targetChannelLogin: targetChannelLogin })
            });

            const data = await res.json();

            if (res.ok) {
                resultBox.innerHTML = data.html_response;
            } else {
                if (data.html_response) {
                    resultBox.innerHTML = data.html_response;
                } else {
                    resultBox.innerHTML = `<p style="color:#e34a64; font-weight:bold; text-align:center;">Erreur Raid (${res.status}): ${data.error || "Une erreur inconnue s'est produite."}</p>`;
                }
            }
        } catch(e) {
            resultBox.innerHTML = `<p style="color:#e34a64; font-weight:bold; text-align:center;">Erreur de connexion au serveur pour le Raid: ${e.message}</p>`;
        } finally {
            btn.disabled = false;
        }
    });
    
    // --- Logique du CHAT IA FLOTTANT (Inchag√©e) ---
    const aiChatBubble = document.getElementById('ai-chat-bubble');
    const aiChatPanel = document.getElementById('ai-chat-panel');
    const aiChatClose = document.getElementById('ai-chat-close');
    const chatWindow = document.getElementById('chat-window');
    const formChatInput = document.getElementById('form-chat-input');
    const chatInput = document.getElementById('chat-input');
    const btnSendChat = document.getElementById('btn-send-chat');

    aiChatBubble.addEventListener('click', () => {
        aiChatPanel.classList.toggle('open');
        aiChatBubble.textContent = aiChatPanel.classList.contains('open') ? '‚ùå' : 'üí¨';
        if (aiChatPanel.classList.contains('open')) {
             chatWindow.scrollTop = chatWindow.scrollHeight;
             chatInput.focus();
        }
    });
    
    aiChatClose.addEventListener('click', () => {
        aiChatPanel.classList.remove('open');
        aiChatBubble.textContent = 'üí¨';
    });
    
    function addMessage(text, isUser) {
        const msgDiv = document.createElement('div');
        msgDiv.className = `chat-message ${isUser ? 'user-message' : 'ai-message'}`;
        const formattedText = isUser ? text : text.replace(/\n/g, '<br>');
        msgDiv.innerHTML = formattedText;
        chatWindow.appendChild(msgDiv);
        chatWindow.scrollTop = chatWindow.scrollHeight; 
    }

    formChatInput.addEventListener('submit', async (e) => {
        e.preventDefault();
        const query = chatInput.value.trim();
        if (!query) return;

        addMessage(query, true); 
        chatInput.value = '';
        btnSendChat.disabled = true;

        addMessage("ü§ñ L'IA r√©fl√©chit...", false);
        chatWindow.scrollTop = chatWindow.scrollHeight;
        
        const loadingMessage = chatWindow.lastChild;
        
        try {
            const res = await fetch(`${API_BASE}/ai_chat_query`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ query: query }) 
            });

            const data = await res.json();
            
            if (loadingMessage) {
                chatWindow.removeChild(loadingMessage);
            }
            
            if(res.ok && data.success) {
                addMessage(data.response, false); 
            } else {
                addMessage(`‚ùå Erreur: ${data.error || "Probl√®me de connexion."}`, false);
            }
            
        } catch(e) {
             if (loadingMessage) {
                chatWindow.removeChild(loadingMessage);
            }
            addMessage(`‚ùå Erreur technique: ${e.message}`, false);
        } finally {
            btnSendChat.disabled = false;
        }
    });
    
    // --- Logique Partage Social (R√âINT√âGR√â) ---
    function sharePage(platform) {
        const url = window.location.href;
        const text = encodeURIComponent("J'utilise l'outil Streamer & Niche AI Hub pour optimiser ma croissance sur Twitch/YouTube ! #StreamerAI #GrowthHacking");
        
        let shareUrl = "";

        switch (platform) {
            case 'twitter':
                shareUrl = `https://twitter.com/intent/tweet?text=${text}&url=${encodeURIComponent(url)}`;
                break;
            case 'facebook':
                shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
                break;
            default:
                return;
        }

        window.open(shareUrl, '_blank', 'width=600,height=400');
    }

    // --- Initialisation au chargement de la page ---
    document.addEventListener('DOMContentLoaded', function() {
        initializePlayer();
        const savedTab = localStorage.getItem('activeTab') || 'tab-account'; // Onglet par d√©faut : Compte
        openTab(savedTab);
        checkAuth();
    });
</script>
</body>
</html>
